<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Musings with Bela</title>
		<meta name="description" content="A tale of accelerometers, knobs, an EEG and the attempt to tame sound with my mind.">
		<meta name="generator" content="Eleventy v3.0.0">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Jackson">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="Jackson">

		
		
		<link rel="stylesheet" href="/css/prism.css"/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.3.2/src/lite-yt-embed.css">
		
		<style>/*
  Josh's Custom CSS Reset
  https://www.joshwcomeau.com/css/custom-css-reset/
*/
*,
*::before,
*::after {
	box-sizing: border-box;
}
* {
	line-height: calc(1em + 0.725rem);
	margin: 0;
}
body {
	-webkit-font-smoothing: antialiased;
}
img,
picture,
video,
canvas,
svg {
	display: block;
	max-width: 100%;
}
input,
button,
textarea,
select {
	font: inherit;
}
p,
h1,
h2,
h3,
h4,
h5,
h6 {
	overflow-wrap: break-word;
	margin: revert;
}
#root,
#__next {
	isolation: isolate;
}

		:root {
	color-scheme: light dark;
	--color-bg: white;
	--color-gray-20: #333333;
	--color-gray-50: #7f7f7f;
	--color-gray-90: #e5e5e5;
	--font-family: "Rag", -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono,
		Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono,
		Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New,
		Courier, monospace;
	--syntax-tab-size: 2;
	--noise-img: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
	--noise-opacity: 0.2;
	/* Josh Comeau shadows */
	--shadow-color: 0deg 0% 0%;
	--shadow-elevation-low: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.16),
		0.1px 0.8px 0.8px -3px hsl(var(--shadow-color) / 0.13);
	--shadow-elevation-medium: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.15),
		0.1px 1px 1.1px -1.5px hsl(var(--shadow-color) / 0.13),
		0.3px 4.2px 4.4px -3px hsl(var(--shadow-color) / 0.11);
	--shadow-elevation-high: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.14),
		0.1px 1.3px 1.4px -0.6px hsl(var(--shadow-color) / 0.13),
		0.2px 2.8px 2.9px -1.2px hsl(var(--shadow-color) / 0.12),
		0.5px 5.7px 6px -1.8px hsl(var(--shadow-color) / 0.11),
		0.9px 10.9px 11.5px -2.4px hsl(var(--shadow-color) / 0.11),
		1.5px 19.3px 20.3px -3px hsl(var(--shadow-color) / 0.1);
	--nav-height: 4em; /* Default height to lower for header*/
}

/* Both for system and user preference */
:root[data-theme="dark"],
.dark-mode {
	color-scheme: dark;
	--color-bg: black;
	--color-gray-20: #cccccc;
	--color-gray-50: #808080;
	--color-gray-90: #1a1a1a;
	--noise-opacity: 0.1;
}

@font-face {
	font-family: "Switzer";
	src: url("/font/Switzer-Variable.woff2") format("woff2");
	font-weight: 500;
	font-display: optional;
	/* font-variation-settings: "wght" 400; */
}
@font-face {
	font-family: "Rag";
	font-style: normal italic;
	font-weight: 400;
	src:
		url("/font/Rag-Regular.woff2") format("woff2"),
		url("/font/Rag-Italic.woff2") format("woff2"),
		url("/font/Rag-Bold.woff2") format("woff2"),
		url("/font/Rag-BoldItalic.woff2") format("woff2");
	font-display: optional;
}

/* Global stylesheet */
html {
	overflow-x: hidden;
}
html,
body {
	width: 100%;
	padding: 0;
	background-color: Canvas;
	background-color: transparent;
	color: CanvasText;
	font-family: var(--font-family);
}
body {
	/* transition:
		color 0.1s,
		background-color 0.1s; */
	/* background-color: Canvas;
		color: CanvasText; */
	display: flex;
	justify-content: center;
	max-width: none;
}

.layout-wrapper {
	display: flex;
	width: 100%;
	max-width: calc(40em + 200px + 2em);
	min-height: 100vh;
}

main {
	width: 100%;
	max-width: 40em;
	padding: 1em;
	transition: margin 0.3s ease; /* Smooth transition for margin change in chat-active state */

	& :first-child {
		margin-top: 0;
	}

	&:where(.chat-active) {
		margin-top: 3em;
	}
}

/* Typography */
h1,
h2,
h3,
.letter {
	width: fit-content;
	font-family: "Switzer";
	text-wrap: balance;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	position: absolute;
	overflow: hidden;
	width: 1px;
	height: 1px;
	white-space: nowrap;
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
}

p:last-child {
	margin-bottom: 0;
}

.links-nextprev {
	padding: 1em 0;
	border-top: 1px dashed var(--color-gray-20);
	margin-top: 1em;
	list-style: none;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre {
	border-radius: 0.25em;
	box-shadow: var(--shadow-elevation-low);
}
pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: 0.5em 0;
	line-height: 1.375; /* 22px /16 */
	text-align: left;
	white-space: pre;
	word-break: normal;
	word-spacing: normal;
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
}
code {
	word-break: break-all;
}

/* Header */
.home-link {
	margin-right: 2em;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
nav {
	position: relative;
	width: 100%;
	list-style: none;
}
.nav-item {
	display: inline-block;
	padding: 0.25em 0;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
}

/* Each item in a po */
.postlist-item {
	position: relative;
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	padding-left: 1.5em; /* Add left padding to make room for the arrow */
	margin-bottom: 1em;

	&::before {
		content: "\2192"; /* Default to arrow */
		position: absolute;
		top: 0.2em;
		left: 0;
		margin-right: 0.5em;
		color: var(--color-gray-20);
		transition: all 0.5s ease-out;
		filter: saturate(100%);
		transform: scale(1);
	}

	&[data-emoji]::before {
		content: attr(data-emoji);
	}

	&:hover::before,
	&:focus-within::before {
		animation: pulseSat 2s linear infinite;
	}

	&:not(:hover)::before {
		animation: none;
		filter: saturate(100%);
		transform: scale(1);
	}

	.postlist-date::after {
		content: attr(data-tooltip);
		position: absolute;
		overflow: hidden;
		max-width: calc(100% - 12em);
		padding-left: 1em;
		color: var(--color-gray-20);
		text-overflow: ellipsis;
		white-space: nowrap;
		opacity: 0;
		visibility: hidden;
		transition:
			opacity 0.3s ease,
			visibility 0.3s ease;
	}

	&:has(.postlist-link:hover) .postlist-date::after {
		opacity: 1;
		visibility: visible;
	}

	&-active .postlist-link {
		font-weight: bold;
	}
}

@keyframes pulseSat {
	0%,
	50%,
	100% {
		filter: saturate(100%);
		transform: scale(1);
	}
	25% {
		filter: saturate(50%);
		transform: scale(0.8);
	}
	75% {
		filter: saturate(150%);
		transform: scale(1.2);
	}
}
.postlist-date {
	color: var(--color-gray-20);
	font-size: 0.8125em; /* 13px /16 */
	word-spacing: -0.5px;
}
.postlist-link {
	flex-basis: 100%;
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}

/* Tags */
.post-tag {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	font-style: italic;
	text-transform: capitalize;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: 0.5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

/* Direct Links / Markdown Headers */
.header-anchor {
	margin-left: 0.1em;
	font-size: 1em;
	font-style: normal;
	text-decoration: none;
}
a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
	text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
	color: #aaa;
}

h2 + .header-anchor {
	font-size: 1.5em;
}

/* Figures */
figure {
	margin: 1em 0;
}
figure > * {
	max-width: 100%;
	margin: 0 auto;
}
/* All images & videos should be in a figure */
figure :first-child {
	border-radius: 0.25em;
	box-shadow: var(--shadow-elevation-low);
}

figcaption {
	margin-top: 0.5em;
	color: var(--color-gray-20);
	text-align: center;
}

blockquote {
	padding-left: 1em;
	border-left: 2px solid ButtonFace;
}

/* Talk bubble styling */
.nav-phrase {
	display: none;
	width: 100%;
	padding: 0 0.5em;
	cursor: text;
}

.nav-bubble {
	position: absolute;
	display: flex;
	justify-content: space-between;
	align-items: center;
	width: calc(100% - 2.5em);
	padding: 0.25em;
	border: 1px solid var(--color-gray-90);
	margin: 0;
	background: ButtonFace;
	transition: all 0.3s ease;
	transform: translateY(calc(var(--item-top) - 12px));
	border-radius: 0.25em;

	&:before,
	&:after {
		content: "";
		position: absolute;
		top: 10px;
		right: -7.5px;
		width: 0;
		height: 0;
		border: 8px solid transparent;
		border-right: 0;
	}

	&:before {
		right: -9px;
		border-left-color: var(--color-gray-90);
	}

	&:after {
		border-left-color: ButtonFace;
	}

	/* Reset position when chat is active */
	&:where(.chat-active) {
		transform: none;
	}
}

/* Talk bubble movement */
header {
	/* We need to add 1 to the active item to account for the first item */
	--item-top: calc(12px + var(--nav-item-active, 1) * var(--nav-item-height));
	--item-rot: 0deg;
	--nav-item-height: 36px;

	position: sticky;
	z-index: 1; /* Ensure the header is above other elements */
	top: 0;
	justify-content: end;
	align-items: start;
	width: 200px;
	height: 100vh;
	padding: 1em;

	&:not(:has(+ .chat-active)) {
		&:has(.nav-item:nth-child(n):hover) {
			--n: var(--n);
			--item-top: calc(12px + (var(--n) - 1) * var(--nav-item-height));
			--item-rot: calc((var(--n) % 2 * 2 - 1) * 15deg);
		}
		&:has(.nav-item:nth-child(1):hover) {
			--n: 1;
		}
		&:has(.nav-item:nth-child(2):hover) {
			--n: 2;
		}
		&:has(.nav-item:nth-child(3):hover) {
			--n: 3;
		}
		&:has(.nav-item:nth-child(4):hover) {
			--n: 4;
		}
		&:has(.nav-item:nth-child(5):hover) {
			--n: 5;
		}
	}
}

.side-nav {
	display: flex;
	justify-content: center;
	width: 100%;
	padding-right: 2em;
}

.nav-list {
	z-index: 1;
	display: flex;
	flex-direction: column;
	width: 100%;
	padding-right: 1em;
	margin: 0;
	text-align: right;
	list-style: none;
	padding-inline-start: 0;
}

.theme-toggle {
	position: relative;
	right: -2.25em;
	align-self: flex-start;
	margin-left: auto;
}

.nav-bubble,
.theme-toggle {
	transition: all 0.3s ease;
}

.theme-toggle {
	transform: rotate(var(--item-rot));
}

#chat-toggle {
	cursor: pointer;
	transition: all 0.3s ease;
}

/* Dark mode toggle styles */
#dark-mode-toggle {
	display: none;
}

#dark-mode-toggle + label {
	border: none;
	background: none;
	font-size: 1em;
	cursor: pointer;
}

#dark-mode-toggle + label::before {
	content: "ðŸ“";
}

#dark-mode-toggle:checked + label::before {
	content: "ðŸ¸";
}

@media (prefers-color-scheme: dark) {
	#dark-mode-toggle:not(:checked) + label::before {
		content: "ðŸ“";
	}
	#dark-mode-toggle:checked + label::before {
		content: "ðŸ¸";
	}
}

:root:has(#dark-mode-toggle:checked) {
	color-scheme: dark;
}

:root:has(#dark-mode-toggle:not(:checked)) {
	color-scheme: light;
}

/* Chat bubble related */
#user-input {
	width: 100%;
	/* Mozilla? */
	padding: 0;
	border: none;
	background: none;
	color: inherit;
	font-family: inherit;
	font-size: inherit;
	outline: none;
}

#user-input::placeholder,
.waiting {
	color: var(--color-gray-50);
	opacity: 0.7;
}

#chat-form {
	width: 100%;
}

#chat-form button {
	display: none;
}

@keyframes ellipsis {
	0% {
		content: ".";
	}
	33% {
		content: "..";
	}
	66% {
		content: "...";
	}
}

.waiting::after {
	content: ".";
	animation: ellipsis 1s infinite;
	display: inline-block;
	width: 1em;
	text-align: left;
}

/* Chat reset */
.chat-reset {
	position: relative;
	display: none;
	align-self: flex-start;
	padding: 0 0.5em;
	border: none;
	background: none;
	color: gray;
	cursor: pointer;
}

/* Add shadow to nav bubble */
.nav-bubble {
	box-shadow: var(--shadow-elevation-low);
}
.nav-bubble.chat-active {
	box-shadow: var(--shadow-elevation-medium);
}

.nav-bubble.chat-active .chat-reset {
	display: inline-block;
}

/* Only do nav switch on wide screens */
@media (min-width: 840px) {
	.nav-bubble {
		&:where(.chat-active) {
			/* left: calc(50% + 200px); */
			/* width: calc(640px - 200px); */
			left: calc(200px);
			width: calc(640px - 4.5em);
		}

		&:where(.chat-active) > * {
			display: block;
		}
	}
}

/* For mobile view */
@media (max-width: 839px) {
	/* Switch side nav off */
	.side-nav {
		display: none;
	}
	/* Mobile */
	.nav-phrase {
		display: inline-block;
	}

	body {
		justify-content: inherit;
		max-width: 40em;
		padding: 0;
		margin: 0 auto;
	}
	.layout-wrapper {
		display: initial;
		max-width: initial;
	}
	main {
		max-width: initial;
		margin-top: var(--nav-height);
	}

	header {
		position: absolute;
		width: 100%;
		max-width: 640px;
		height: initial;
		padding-bottom: 0;
		gap: 1em 0.5em;
	}

	nav {
		flex-direction: column;
	}

	.nav-bubble {
		position: relative;
		left: initial;
		transform: none; /* Reset the transform */
	}
}

/* Util */
.line-clamp {
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.noise-container {
	position: fixed;
	z-index: -1;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-image: var(--noise-img);
	background-size: 182px;
	background-repeat: repeat;
	pointer-events: none;
	opacity: var(--noise-opacity);
}

/* Spotify widget */
.spotify-widget img {
	border-radius: 0.25em;
	box-shadow: var(--shadow-elevation-low);
}

/* Sidebar progress bar */
.progress-bar {
	position: fixed;
	top: 0;
	left: 0;
	width: 0.5em;
	height: 100vh;
	background-color: var(--color-gray-50);
	transform-origin: 0 0;
	transform: scaleY(0);
}

@supports (animation-timeline: scroll()) {
	html {
		scrollbar-width: none; /* Firefox */
		-ms-overflow-style: none; /* Internet Explorer 10+ */
	}

	html::-webkit-scrollbar {
		display: none; /* Chrome, Safari, and Opera */
		width: 0;
		height: 0;
	}

	.progress-bar {
		animation: grow-progress linear;
		animation-timeline: scroll(root block);
		animation-range: entry 0% cover 100%;
	}

	@keyframes grow-progress {
		to {
			transform: scaleY(1);
		}
	}
}

/* Citation */
.citation {
	padding-left: 2em;
	margin-bottom: 1em;
	text-indent: -2em;
}

.citation p {
	margin: 0;
}

/* Search results */
#search-results {
	overflow-y: auto;
	max-height: 50vh;
}
#search-results:has(.search-result) {
	border-top: 1px solid var(--color-gray-90);
	margin-top: 0.25em;
}

.search-result {
	--border-width: 0px;
	display: block;
	padding: 0.5em 1em;
	border-bottom: 1px solid var(--color-gray-90);
	background: linear-gradient(var(--color-gray-50), var(--color-gray-50))
		left/var(--border-width) 100% no-repeat;
	color: inherit;
	text-decoration: none;
	transition: 0.3s ease;
	transition-property: background-size, background-color;
}

.search-result:hover {
	--border-width: 3px;
	background-color: var(--color-gray-90);
}

.search-result a {
	color: var(--color-gray-20);
	font-weight: bold;
	text-decoration: none;
}

.search-result p {
	margin: 0;
	color: var(--color-gray-50);
}</style>
	</head>
	<body style="--nav-item-active: 1;">
		<div class="noise-container"></div>
		<a href="#skip" class="visually-hidden">Skip to main content</a>
		<div class="layout-wrapper">
			<header class="site-header">
				<nav>
					<h2 class="visually-hidden">Top level navigation menu</h2>
					<div class="nav-bubble">
    <button id="chat-reset" class="chat-reset" aria-label="Reset chat">â†º</button>
    <div id="navPhrase" class="nav-phrase">
        
            
            <a href="/" style="text-decoration: none;">Home</a>&emsp;<a href="/projects/" style="text-decoration: none;">Projects</a>&emsp;<a href="/blog/" style="text-decoration: none;">Blog</a>&emsp;<a href="/about/" style="text-decoration: none;">About Me</a>
        
    </div>
    <form method="post" id="theme-form" class="theme-toggle">
        <input type="checkbox" id="dark-mode-toggle" name="theme" value="dark" aria-label="Toggle dark mode">
        <label for="dark-mode-toggle"></label>
    </form>
</div>
					<div class="side-nav">
						<ul class="nav-list">
							<li id="chat-toggle" class="nav-item">Welcome!</li>
								<li class="nav-item">
									<a href="/">Home</a>
								</li>
								<li class="nav-item">
									<a href="/projects/">Projects</a>
								</li>
								<li class="nav-item">
									<a href="/blog/">Blog</a>
								</li>
								<li class="nav-item">
									<a href="/about/">About Me</a>
								</li>
						</ul>
					</div>
				</nav>

				
			</header>

			<main id="skip" class="container">
				
<div class="progress-bar"></div>

<article class="post">
  <h1>Musings with Bela&ensp;ðŸ§ </h1>

  <ul class="post-metadata">
    <li>
      <time datetime="2020-10-16">16 October 2020</time>
    </li>
      <li>
        <a href="/tags/projects/" class="post-tag">projects</a>
      </li>
  </ul>

  <p>In an effort to explore the wild world of interactive music systems, I decided to work with a <a href="https://choosemuse.com/">portable EEG reader</a> and a <a href="https://bela.io/">Bela</a> coupled with an accelerometer and potentiometers. Little did I know how much of a challenge it would be to join both software and hardware within an interactive package.</p>
<h2 id="inspiration" tabindex="-1">Inspiration <a class="header-anchor" href="#inspiration">#</a></h2>
<p>Coming from a undergraduate degree in cognitive science, I've always wanted to work with (read hack) an <a href="https://en.wikipedia.org/wiki/Electroencephalography">electroencephalogram</a> (EEG) for some kind of artistic performance or instrument. While I have worked with a more traditional systems that require head-caps and conductive gel, I have never had the opportunity to test out some of the many different portable systems that have come out in the last decade. After reaching out to <a href="https://arj.no">Alexander Jensenius</a>, I was able to borrow a system from a researcher at RITMO - which I'll cover later in the hardware section.</p>
<h3 id="artistic-examples" tabindex="-1">Artistic examples <a class="header-anchor" href="#artistic-examples">#</a></h3>
<p>In addition to my personal interest in finding an artistic meeting point between cog-sci and MCT, I was also inspired by a number of performances and musical systems that employed EEG technology.</p>
<p>The first of these was <a href="https://en.wikipedia.org/wiki/Alvin_Lucier">Alvin Lucier's</a> &quot;Music for Solo Performer&quot; (1965) which was a landmark piece not only for its use of an EEG but sonification generally. Lucier had mapped the voltage potential from his electrodes into low-frequency tones that were able to excite percussive instruments in front of him.</p>
<figure>
				<lite-youtube videoid="bIPU2ynqy2Y" >
					<button type="button" class="lty-playbtn">
						<span class="lyt-visually-hidden">Alvin Lucier's Music for Solo Performer (1965)</span>
					</button>
				</lite-youtube>
				<figcaption>Alvin Lucier's Music for Solo Performer (1965)</figcaption>
			</figure>
<p>The second performance that offered insights into using EEG's in a sonic environment was Ouzounian et al.'s Music for Sleeping &amp; Waking Minds (2011-2012). In their piece, they asked a group of participants to wear EEG sensors as they spent a night in a collective slumber. Over the course of the night, their brain waves (in passing through the various oscillatory states of sleep) were represented in sound and light.</p>
<figure>
				<lite-vimeo videoid="30261043" style="aspect-ratio: 16/9;">
					<div class="ltv-playbtn"></div>
				</lite-vimeo>
				<figcaption>Participants sleeping for Music for Sleeping & Waking Minds (2011-2012)</figcaption>
			</figure>
<p>In addition to these, there were a number of other interesting takes on EEG sonification such as <a href="http://graceleslie.com/MoodMixer">MoodMixer</a> (Leslie and Mullen, 2011), a collaborative installation where two participants navigate a shared musical space via EEG as represented by a 2D visual space. Another implementation comes from the <a href="https://www.researchgate.net/publication/209435991_Disembodied_and_Collaborative_Musical_Interaction_in_the_Multimodal_Brain_Orchestra">Multimodal Brain Orchestra</a> (Le Grouz et al., 2010), a collection of musicians whose sheet music was generated on the spot as a product from a reading of their collective cognitive response. And recently, <a href="https://www.youtube.com/watch?v=n0T2uB-GLc8">Chris Chafe</a> worked on sonification of seizure data recorded from EEGs, providing an illumination of hidden neural activity.</p>
<p>However, in all of these examples, it's not obvious what the sensor data is actually being mapped to - a confusing experience from both the audience as well as someone trying to find inspiration for an IMS of their own. For a much more clear framework on how one would go about building and evaluating an IMS, I turned to the literature.</p>
<h3 id="academic-support" tabindex="-1">Academic support <a class="header-anchor" href="#academic-support">#</a></h3>
<p>Two articles held my interest during the time I spent conceptualizing and designing my system, the first from Birnbaum et al. In their article Towards a Dimension Space for Musical Devices, the authors lay out a visual representation for describing aspects of IMS (Birnbaum et al., 2005). They identify 7-axes that might characterize new interactive music systems and, in parallel, provide some representative space of which to locate an author's proposal for their own IMS.</p>
<ul>
<li>Required Expertise</li>
<li>Musical Control</li>
<li>Feedback Modalities</li>
<li>Degrees of Freedom</li>
<li>Inter-actors</li>
<li>Distribution in Space</li>
<li>Role of Sound</li>
</ul>
<p>These principles were helpful as a means of comparing my proposed instrument against others but also for a class of features to focus on as I developed it. For Musings with Bela, this is how we might visualize its capacity as an instrument:</p>
<figure><img src="/img/musings-dim_space.png" style="aspect-ratio: 560px;" alt="Musings with Bela's dimension space" /><figcaption>Musings with Bela's dimension space</figcaption></figure>
<p>The second paper, A Framework for the Evaluation of Digital Musical Instruments by O'Modhrain takes ups a similar issue with the absence of well defined lenses through which we can consider, criticize and explain a musical instrument (O'Modhrain, 2011). O'Modhrain suggest that taking the perspective of not only a musician or designer when building an IMS, but also that of an audience member or even a manufacturer. These novel perspectives force an author to consider their instrument from angles that are not typically confronted until after the instrument has been built. In both articles, it is clear that building a musical interface is a project whose treatment must be considered with others in mind.</p>
<h2 id="hardware" tabindex="-1">Hardware <a class="header-anchor" href="#hardware">#</a></h2>
<p>The device actually made use of the breadboard it was wired to as a frame to hold and rotate the device. The Bela was placed in between the accelerometer and two knobs, allowing for it to easily sit in one's hands. The idea was to keep the design uncomplicated as the EEG might require the performer to have their eyes closed.</p>
<!-- <div class="flex">
    <figure class="split-view">
        <img src="/img/musings-bela.jpg">
        <figcaption>Bela and friends</figcaption>
    </figure>
    <figure class="split-view">
        <img src="/img/musings-muse.jpg">
        <figcaption>The Muse</figcaption>
    </figure>
</div> -->
<p>A <a href="https://choosemuse.com/">Muse</a> (2016) portable eeg headband, graciously borrowed from RITMO, was another major hardware device incorporated within my IMS. I had read through my preliminary research that this device might be easily hackable. Imagine my frustration after finding out all developer resources for the device were discontinued in the last year. Unbroken, I pushed forward and ended up modifying a completely unknown Python package to finally interface with the device.</p>
<p>Nevertheless, the device's specs were quite impressive with 4 electrodes recording at 256Hz and an all-day battery life (no joke). Unfortunately, the fact that the device streamed through Bluetooth meant that my laptop would necessarily be involved (I wouldn't <em>dare</em> attempt it on the Bela (Okay, maybe if I had another week!)).</p>
<h2 id="software" tabindex="-1">Software <a class="header-anchor" href="#software">#</a></h2>
<h2 id="interpolating-between-tables-with-an-accelerometer" tabindex="-1">Interpolating between tables with an accelerometer <a class="header-anchor" href="#interpolating-between-tables-with-an-accelerometer">#</a></h2>
<figure><img src="/img/musings-tables.webp" style="aspect-ratio: 420px;" alt="Sliding between different tables" /><figcaption>Sliding between different tables</figcaption></figure>
<p>At the core of my system was a method for interpolating between short audio grains. Audio files were read into an array of 1024 samples and these arrays were then interpolated using the external <a href="">iemmatrix</a>. More typical methods of reading through arrays would be to step through each index and read the sample, apply whatever operation you wanted and then store it. In my case, however, I wanted to tie the accelerometer to degree each sound file is interpolated into one another (via arrays) which makes it challenge to read through these arrays sequentially when the sample rate of change needs to be very fast. iemmatrix instead, allows for operations to take place on the array as a whole (like <a href="https://www.geeksforgeeks.org/vectorization-in-python/">numpy vectorization</a>) meaning this is a much more efficient method of morphing between these arrays.</p>
<figure><img src="/img/musings-intrp.png" style="aspect-ratio: 560px;" alt="A shot of the main matrix operation sub-patch" /><figcaption>A shot of the main matrix operation sub-patch</figcaption></figure>
<p>What's cool about this is that working with sound files as tables allows you to do some non-linear transformations like interpolating between a sound and it's reverse sequence.</p>
<figure><img src="/img/musings-reverse.webp" style="aspect-ratio: 420px;" alt="Morphing between a sound bite and its flipped image" /><figcaption>Morphing between a sound bite and its flipped image</figcaption></figure>
<p>Upon reflection, another alternative would be to get two readings, do the matrix operations, and slide between them with a [line] object. As I was looking into this, this is an external (list-abs) that allows for linear interpolation between lists. However, this might be a slightly more costly object to use - perhaps a combination of both techniques would have worked best.</p>
<p>The two physical knobs control an oscillator to read the resultant table (a morphed sound grain) into the DAC. These knobs are also read at audio-rate but the operations they control are far less complicated. In Musings with Bela, these knobs serve as tuners for the synth that can explored (sonically) by rotating the device.</p>
<h2 id="reading-arrays-and-remaining-calm" tabindex="-1">Reading arrays and remaining calm <a class="header-anchor" href="#reading-arrays-and-remaining-calm">#</a></h2>
<p>Finally, the last piece to my glorious IMS puzzle, the Muse! As I mentioned, this device was tricky, thorny, and a general struggle to work with, especially considering I had to set the Bela up as a WiFi hot-spot to pass the samples from the Muse, to my PC and then off to the Bela.</p>
<p>Another major piece of working with the Muse was actually testing to see the behavior of the electrode readings: if they were consistent, their fluctuations, and whether or not I would be able to reliably reduce the noise and relative intensity. I made a sub-patch to test for this reason, allowing me to record and playback samples from the Muse even without its connection.</p>
<figure><img src="/img/musings-eeg.webp" style="aspect-ratio: 16/9;" alt="Data from the Muse" /><figcaption>Data from the Muse</figcaption></figure>
</figure>
<p>Musings with Bela takes this EEG stream and modulate the amplitude of the read table so that, in theory, a wandering, active mind would lead to a disrupted synth. The configuration was technical to say the least and, in retrospect, something I wish I had tackled earlier in the building process so I could use the EEG signals in a more complex mapping.</p>
<h2 id="reflections" tabindex="-1">Reflections <a class="header-anchor" href="#reflections">#</a></h2>
<p>Building an IMS is a whirlwind of an experience and one that is especially difficult to achieve in two weeks. Working with hardware and software turned out to double the time I expected any individual task would take. However, I feel like I had successfully built an interesting system that touched on my history with cognitive science and applied within an acousmatic environment.</p>
<p>Here is my short, final performance for MCT4045</p>
<figure>
				<lite-youtube videoid="gEq9EnWrApc?start=901" >
					<button type="button" class="lty-playbtn">
						<span class="lyt-visually-hidden">Musings with Bela Performance</span>
					</button>
				</lite-youtube>
				<figcaption>Musings with Bela Performance</figcaption>
			</figure>
<p>And my final presentation can be found below as well</p>
<figure>
<iframe src="https://slides.com/jacksongoode/musings-bela/embed" width="800" height="450" scrolling="no" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
</figure>
<h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references">#</a></h2>
<p>Birnbaum, David, et al. <em>Towards a Dimension Space for Musical Devices</em>. 2005.</p>
<p>Fan, Yuan-Yi, and F. Myles Sciotto. 'BioSync: An Informed Participatory Interface for Audience Dynamics and Audiovisual Content Co-Creation Using Mobile PPG and EEG.' <em>NIME</em>, 2013, pp. 248--251.</p>
<p>Hamano, Takayuki, et al. 'Generating an Integrated Musical Expression with a Brain-Computer Interface.' <em>NIME</em>, 2013, pp. 49--54.</p>
<p>Le Groux, Sylvain, et al. 'Disembodied and Collaborative Musical Interaction in the Multimodal Brain Orchestra.' <em>NIME</em>, 2010, pp. 309--314.</p>
<p>Leslie, Grace, and Tim R. Mullen. 'MoodMixer: EEG-Based Collaborative Sonification.' <em>NIME</em>, Citeseer, 2011, pp. 296--299.</p>
<p>O'Modhrain, Sile. 'A Framework for the Evaluation of Digital Musical Instruments'. <em>Computer Music Journal</em>, vol. 35, Mar. 2011, pp. 28--42. <em>ResearchGate</em>, doi:<a href="https://doi.org/10.1162/COMJ_a_00038">10.1162/COMJ_a_00038</a>.</p>
<p>Ouzounian, Gascia, et al. 'To Be inside Someone Else's Dream: On Music for Sleeping &amp; Waking Minds'. <em>New Interfaces for Musical Expression (NIME 2012)</em>, 2012, pp. 1--6.</p>
<p>Parvizi, Josef, et al. 'Detecting Silent Seizures by Their Sound'. <em>Epilepsia</em>, vol. 59, no. 4, 2018, pp. 877--84. <em>Wiley Online Library</em>, doi:<a href="https://doi.org/10.1111/epi.14043">10.1111/epi.14043</a>.</p>
<p>Straebel, Volker, and Wilm Thoben. 'Alvin Lucier's Music for Solo Performer: Experimental Music beyond Sonification'. <em>Organised Sound</em>, vol. 19, no. 1, Cambridge University Press, Apr. 2014, pp. 17--29. <em>Cambridge University Press</em>, doi:<a href="https://doi.org/10.1017/S135577181300037X">10.1017/S135577181300037X</a>.</p>
<p>Wu, Dan, et al. 'Scale-Free Brain Quartet: Artistic Filtering of Multi-Channel Brainwave Music'. <em>PloS One</em>, vol. 8, no. 5, 2013, p. e64046. <em>PubMed</em>, doi:<a href="https://doi.org/10.1371/journal.pone.0064046">10.1371/journal.pone.0064046</a>.</p>

      <ul class="links-nextprev">
          <li>Previous: <a href="/projects/2020-09-20-classifying-urban-sounds/">Classifying Urban Sounds in a Multi-label Database</a>
          </li>
        
          <li>Next: <a href="/projects/2020-10-23-film-for-music/">Music for a Series of Scenes</a>
          </li>
        
      </ul>
</article>
			</main>
		</div>
		<footer></footer>

		<!-- This page `/projects/2020-10-16-musings-bela/` was built on 2024-09-05T22:29:09.248Z -->
	</body>
</html>
<script defer>
	// Minimal JS for handling user preference
(function () {
    const toggle = document.getElementById('dark-mode-toggle');

    // Set initial state based on localStorage or system preference
    const storedTheme = localStorage.getItem('color-scheme');
    if (storedTheme) {
        document.documentElement.setAttribute('data-theme', storedTheme);
        toggle.checked = storedTheme === 'dark';
    }

    // Handle toggle changes
    toggle.addEventListener('change', () => {
        const newTheme = toggle.checked ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('color-scheme', newTheme);
    });

    // const form = document.getElementById('theme-form');
    // Handle form submission (for no-JS fallback)
    // form.addEventListener('submit', (e) => {
    //     e.preventDefault();
    //     const formData = new FormData(form);
    //     fetch('/set-theme', {
    //         method: 'POST',
    //         body: formData
    //     }).then(() => {
    //         location.reload();
    //     });
    // });
})();

		// Generate a random user ID if not already stored
function getUserId() {
	let userId = localStorage.getItem("userId");
	if (!userId) {
		userId = "user_" + Math.random().toString(36).slice(2, 11);
		localStorage.setItem("userId", userId);
	}
	return userId;
}

function sendMessageToWorker(message) {
	const isDevelopment =
		window.location.hostname === "localhost" ||
		window.location.hostname === "127.0.0.1";
	const baseUrl = isDevelopment ? "http://localhost:8090" : "";

	const isDarkMode =
		document.documentElement.getAttribute("data-theme") === "dark";
	const animalParam = isDarkMode ? "frog" : "chicken";
	const waitText = isDarkMode ? "Ribbit" : "Cluck";

	updateNavPhrase(waitText, true);

	const userId = getUserId();

	fetch(
		`${baseUrl}/ai?message=${encodeURIComponent(message)}&animal=${animalParam}&userId=${userId}`,
	)
		.then((response) => response.json())
		.then((data) => {
			updateNavPhrase(data.response || `Error: ${data.error}`);
		})
		.catch((error) => {
			console.error("Fetch error:", error);
			updateNavPhrase("Sorry, something went wrong.");
		});
}

function updateNavPhrase(text, isWaiting = false) {
	const navPhrase = document.getElementById("navPhrase");
	navPhrase.textContent = text;
	navPhrase.classList.toggle("waiting", isWaiting);

	// Add this line to make the chat bubble clickable again after receiving a response
	if (!isWaiting) {
		navPhrase.classList.add("clickable");
	}
}

document.addEventListener("DOMContentLoaded", function () {
	const chatTrigger = document.getElementById("chat-toggle");
	const talkBubble = document.querySelector(".nav-bubble");
	const mainContent = document.querySelector("main");
	const navPhrase = document.getElementById("navPhrase");
	let originalContent = navPhrase.innerHTML;

	const chatReset = document.getElementById("chat-reset");

	function resetChatInterface() {
		navPhrase.innerHTML = originalContent;
		talkBubble.classList.remove("chat-active");
		mainContent.classList.remove("chat-active");
	}

	chatReset.addEventListener("click", resetChatInterface);

	function activateChatInterface() {
		navPhrase.innerHTML = `
			<form id="chat-form">
				<input type="text" id="user-input" placeholder="Search... or say hi?">
				<button type="submit" style="display:none;">Send</button>
			</form>
			<div id="search-results"></div>
		`;
		const userInput = document.getElementById("user-input");
		userInput.focus();

		const searchResults = document.getElementById("search-results");
		let pagefind;

		userInput.addEventListener("input", async function () {
			if (!pagefind) {
				pagefind = await import("/pagefind/pagefind.js");
				await pagefind.options({
					element: "#search-results",
					excerptLength: 15,
					highlightParam: "highlight",
				});
				await pagefind.init();
			}

			const query = userInput.value.trim();
			if (query.length > 2) {
				const search = await pagefind.search(query);
				const results = await Promise.all(search.results.map((r) => r.data()));

				if (results.length > 0) {
					searchResults.innerHTML = results
						.map(
							(result) => `
							<a href="${result.url}" class="search-result">
								<div class="search-result-title">${result.meta.title || "Untitled"}</div>
								<p>${result.excerpt}</p>
							</a>
						`,
						)
						.join("");
					talkBubble.classList.add("chat-active");
				} else {
					searchResults.innerHTML = "";
				}
			} else {
				searchResults.innerHTML = "";
			}
		});

		document
			.getElementById("chat-form")
			.addEventListener("submit", function (e) {
				e.preventDefault();
				if (userInput.value.trim() !== "") {
					sendMessageToWorker(userInput.value.trim());
					userInput.value = "";
					searchResults.innerHTML = "";
				}
			});

		// Add event listener for escape key to reset chat interface
		userInput.addEventListener("keydown", function (e) {
			if (e.key === "Escape") {
				resetChatInterface();
			}
		});
	}

	function handleChatTrigger() {
		talkBubble.classList.toggle("chat-active");
		mainContent.classList.toggle("chat-active");

		if (talkBubble.classList.contains("chat-active")) {
			activateChatInterface();
		} else {
			navPhrase.innerHTML = originalContent;
		}
	}

	chatTrigger.addEventListener("click", handleChatTrigger);

	// Modify this event listener to handle clicks on the chat bubble
	navPhrase.addEventListener("click", function (event) {
		// Check if the clicked element is a link
		if (event.target.tagName.toLowerCase() === "a") {
			// If it's a link, let the default action happen (follow the link)
			return;
		}

		if (
			window.innerWidth < 840 &&
			!talkBubble.classList.contains("chat-active")
		) {
			handleChatTrigger();
		} else if (navPhrase.classList.contains("clickable")) {
			activateChatInterface();
			navPhrase.classList.remove("clickable");
		}
	});
});
</script>


<script src="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.3.3/src/lite-yt-embed.js"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/lite-vimeo-embed/+esm" defer></script>
