<!doctype html>
<html lang="en" class="no-js">
	<script>document.documentElement.classList.remove('no-js');</script>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<title>43 rpm</title>
		<meta name="description" content="Hello, I&#39;m Jackson.">
		<meta name="generator" content="Eleventy v3.0.0">

		
		<link rel="icon" href="/icon/favicons/favicon.ico" sizes="32x32">
		<link rel="icon" href="/icon/favicons/icon.svg" type="image/svg+xml">
		<link rel="apple-touch-icon" href="/icon/favicons/apple-touch-icon.png">
		<link rel="manifest" href="/icon/favicons/manifest.webmanifest">

		<link rel="preload" as="font" href="/font/Switzer-Variable.subset.woff2" crossorigin="">
		<link rel="preload" as="font" href="/font/Rag-Regular.subset.woff2" crossorigin="">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Jackson">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="Jackson">
		<style>
			/*
  Josh's Custom CSS Reset
  https://www.joshwcomeau.com/css/custom-css-reset/
*/
*,
*::before,
*::after {
	box-sizing: border-box;
}
* {
	line-height: calc(1em + 0.725rem);
	margin: 0;
}
body {
	-webkit-font-smoothing: antialiased;
}
img,
picture,
video,
canvas,
svg {
	display: block;
	max-width: 100%;
}
input,
button,
textarea,
select {
	font: inherit;
}
p,
h1,
h2,
h3,
h4,
h5,
h6 {
	overflow-wrap: break-word;
	margin: revert;
}
#root,
#__next {
	isolation: isolate;
}

		:root {
	color-scheme: light dark;
	--color-bg: white;
	--color-gray-20: #333333;
	--color-gray-50: #7f7f7f;
	--color-gray-90: #e5e5e5;
	--font-family: "Rag", -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono,
		Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono,
		Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New,
		Courier, monospace;
	--syntax-tab-size: 2;
	--noise-img: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
	--noise-opacity: 0.2;
	/* Josh Comeau shadows */
	--shadow-color: 0deg 0% 0%;
	--shadow-elevation-low: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.16),
		0.1px 0.8px 0.8px -3px hsl(var(--shadow-color) / 0.13);
	--shadow-elevation-medium: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.15),
		0.1px 1px 1.1px -1.5px hsl(var(--shadow-color) / 0.13),
		0.3px 4.2px 4.4px -3px hsl(var(--shadow-color) / 0.11);
	--shadow-elevation-high: 0px 0.2px 0.2px hsl(var(--shadow-color) / 0.14),
		0.1px 1.3px 1.4px -0.6px hsl(var(--shadow-color) / 0.13),
		0.2px 2.8px 2.9px -1.2px hsl(var(--shadow-color) / 0.12),
		0.5px 5.7px 6px -1.8px hsl(var(--shadow-color) / 0.11),
		0.9px 10.9px 11.5px -2.4px hsl(var(--shadow-color) / 0.11),
		1.5px 19.3px 20.3px -3px hsl(var(--shadow-color) / 0.1);
	--nav-height: 4rem; /* Default height to lower for header*/
	--padding-x: 1rem;
	--padding-y: 2rem;
}

/* Both for system and user preference */
:root[data-theme="dark"],
.dark-mode {
	color-scheme: dark;
	--color-bg: black;
	--color-gray-20: #cccccc;
	--color-gray-50: #808080;
	--color-gray-90: #1a1a1a;
	--noise-opacity: 0.1;
}

@font-face {
	font-weight: 500;
	src: url("/font/Switzer-Variable.subset.woff2") format("woff2");
	font-family: "Switzer";
	font-display: swap;
	/* font-variation-settings: "wght" 400; */
}
@font-face {
	font-style: normal italic;
	font-weight: 400;
	src:
		url("/font/Rag-Regular.subset.woff2") format("woff2"),
		url("/font/Rag-Italic.subset.woff2") format("woff2"),
		url("/font/Rag-Bold.subset.woff2") format("woff2"),
		url("/font/Rag-BoldItalic.subset.woff2") format("woff2");
	font-family: "Rag";
	font-display: swap;
}

/* Only set the overflow to the root */
html {
	contain: paint;
}
html,
body {
	background-color: Canvas;
	background-color: transparent;
	color: CanvasText;
	font-family: var(--font-family);
}

body {
	display: flex;
	flex-direction: row;
	min-height: 100dvh;
	width: 100%;
	max-width: calc(40rem + 200px + 2rem);
	margin: 0 auto;
}

.site-header {
	position: sticky;
	top: 0;
	align-self: flex-start;
	width: 200px;
	flex-shrink: 0;
	padding: var(--padding-y) var(--padding-x);
}

main {
	width: 100%;
	max-width: 40rem;
	padding: var(--padding-y) var(--padding-x);

	& h1:first-child,
	& h2:first-child,
	& h3:first-child {
		margin-top: 0;
	}

	/* Add a margin for when chat bubble is absolute */
	&:where(.chat-active) {
		margin-top: 3rem;
	}
}

/* Typography */
h1,
h2,
h3 {
	margin-top: 1.5rem;
	margin-bottom: 1rem;
}

h1,
h2,
h3,
.letter {
	text-wrap: balance;
	width: fit-content;
	font-family: "Switzer";
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	position: absolute;
	width: 1px;
	height: 1px;
	overflow: hidden;
	white-space: nowrap;
	clip-path: inset(50%);
}

p:last-child {
	margin-bottom: 0;
}

/* Post navigation */
.post-nav {
	display: flex;
	flex-direction: row;
	justify-content: space-between;
	align-items: center;
	margin-top: 1rem;
}

.post-nav a {
	display: flex;
	align-items: center;
	text-decoration: none;
	color: var(--color-gray-20);
	max-width: 100%;
}

.post-nav:has(.post-nav-prev):has(.post-nav-next) a {
	max-width: calc(50% - 1rem);
}

.post-nav-prev {
	margin-right: auto;
}

.post-nav-next {
	margin-left: auto;
}

.post-nav-title {
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.post-nav-arrow {
	flex-shrink: 0;
	padding: 0 0.25rem;
}

.post-nav-divider {
	padding: 0 0.5rem;
	color: var(--color-gray-50);
}

table {
	margin: 1rem 0;
}
table td,
table th {
	padding-right: 1rem;
}

pre {
	border-radius: 0.25rem;
	box-shadow: var(--shadow-elevation-low);
}
pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	margin: 0.5rem 0;
	line-height: 1.375; /* 22px /16 */
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-break: normal;
	word-spacing: normal;
	tab-size: var(--syntax-tab-size);
}
code {
	word-break: break-all;
}

/* Header */
.home-link {
	margin-right: 2rem;
	font-weight: 700;
	font-size: 1rem; /* 16px /16 */
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
nav {
	position: relative;
	width: 100%;
	list-style: none;
}
.nav-item {
	display: block;
}

.nav-link {
	display: block;
	padding: 0.25rem 0;
	text-decoration: none;
	color: inherit;
}

a.nav-link:hover {
	text-decoration: underline;
}

.nav-item a[href][aria-current="page"] {
	color: GrayText;
	cursor: default;
	pointer-events: none;
}

.nav-item a[href][aria-current="page"]:hover {
	text-decoration: none;
}

/* Posts list */
.postlist {
	padding: 0;
	list-style: none;
}

/* Each item in a po */
.postlist-item {
	display: flex;
	position: relative;
	flex-wrap: wrap;
	align-items: baseline;
	margin-bottom: 1rem;
	padding-left: 1.5rem; /* Add left padding to make room for the arrow */

	&::before {
		position: absolute;
		top: 0.2rem;
		left: 0;
		margin-right: 0.5rem;
		transform: scale(1);
		content: "\2192"; /* Default to arrow */
		color: var(--color-gray-20);
		filter: saturate(100%);
		transition: all 0.5s ease-out;
	}

	&[data-emoji]::before {
		content: attr(data-emoji);
	}

	&:hover::before,
	&:focus-within::before {
		animation: pulseSat 2s linear infinite;
	}

	&:not(:hover)::before {
		transform: scale(1);
		animation: none;
		filter: saturate(100%);
	}

	.postlist-date::after {
		visibility: hidden;
		position: absolute;
		max-width: calc(100% - 12rem);
		padding-left: 1rem;
		overflow: hidden;
		content: attr(data-tooltip);
		color: var(--color-gray-20);
		text-overflow: ellipsis;
		white-space: nowrap;
		opacity: 0;
		transition:
			opacity 0.3s ease,
			visibility 0.3s ease;
	}

	&:has(.postlist-link:hover) .postlist-date::after {
		visibility: visible;
		opacity: 1;
	}

	&-active .postlist-link {
		font-weight: bold;
	}
}

@keyframes pulseSat {
	0%,
	50%,
	100% {
		transform: scale(1);
		filter: saturate(100%);
	}
	25% {
		transform: scale(0.8);
		filter: saturate(50%);
	}
	75% {
		transform: scale(1.2);
		filter: saturate(150%);
	}
}
.postlist-date {
	color: var(--color-gray-20);
	font-size: 0.8125rem; /* 13px /16 */
	word-spacing: -0.5px;
}
.postlist-link {
	flex-basis: 100%;
	font-weight: 700;
	font-size: 1.1875rem; /* 19px /16 */
	text-decoration-thickness: 1px;
	text-underline-position: from-font;
	text-underline-offset: 0;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
	text-transform: capitalize;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	margin: 0;
	padding: 0;
	gap: 0.5rem;
	list-style: none;
}
.post-metadata time {
	margin-right: 1rem;
}

/* Direct Links / Markdown Headers */
.header-anchor {
	margin-left: 0.1rem;
	font-style: normal;
	text-decoration: none;
}
a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
	text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
	color: #aaa;
}

h2 + .header-anchor {
	font-size: 1.5rem;
}

/* Figures */
figure {
	margin: 1rem 0;
}
figure > * {
	max-width: 100%;
	margin: 0 auto;
}
/* All images & videos should be in a figure */
figure :first-child {
	border-radius: 0.25rem;
	box-shadow: var(--shadow-elevation-low);
}

figcaption {
	margin-top: 0.5rem;
	color: var(--color-gray-50);
	text-align: center;
}

blockquote {
	padding-left: 1rem;
	border-left: 2px solid ButtonFace;
}

/* Talk bubble styling */
.nav-phrase {
	display: none;
	width: 100%;
	padding: 0 0.5rem;
	cursor: text;
}

.nav-bubble {
	display: flex;
	position: absolute;
	align-items: center;
	justify-content: space-between;
	width: calc(100% - 2.5rem);
	margin: 0;
	padding: calc(0.25rem - 1px);
	transform: translateY(calc(var(--item-top) - 12px));
	border: 1px solid var(--color-gray-90);
	border-radius: 0.25rem;
	background: ButtonFace;
	transition: transform 0.3s ease;

	&:before,
	&:after {
		position: absolute;
		top: 10px;
		right: -7.5px;
		width: 0;
		height: 0;
		border: 8px solid transparent;
		border-right: 0;
		content: "";
	}

	&:before {
		right: -9px;
		border-left-color: var(--color-gray-90);
	}

	&:after {
		border-left-color: ButtonFace;
	}

	/* Reset position when chat is active */
	&:where(.chat-active) {
		transform: none;
	}
}

/* Talk bubble movement */
header {
	/* We need to add 1 to the active item to account for the first item */
	--item-top: calc(12px + var(--nav-item-active, 1) * var(--nav-item-height));
	--nav-item-height: 36px;
	z-index: 1; /* Ensure the header is above other elements */

	display: flex;
	flex-direction: column;
	align-items: flex-end;
	justify-content: flex-start;
	width: 200px;
	padding: 1rem;

	&:not(:has(+ .chat-active)) {
		&:has(.nav-item:nth-child(n):hover) {
			--n: var(--n);
			--item-top: calc(12px + (var(--n) - 1) * var(--nav-item-height));
		}
		&:has(.nav-item:nth-child(1):hover) {
			--n: 1;
		}
		&:has(.nav-item:nth-child(2):hover) {
			--n: 2;
		}
		&:has(.nav-item:nth-child(3):hover) {
			--n: 3;
		}
		&:has(.nav-item:nth-child(4):hover) {
			--n: 4;
		}
		&:has(.nav-item:nth-child(5):hover) {
			--n: 5;
		}
	}
}

.side-nav {
	display: flex;
	justify-content: center;
	width: 100%;
	padding-right: 2rem;
}

.nav-list {
	display: flex;
	z-index: 1;
	flex-direction: column;
	width: 100%;
	margin: 0;
	padding-right: 1rem;
	padding-inline-start: 0;
	list-style: none;
	text-align: right;
}

.theme-toggle {
	position: relative;
	right: -2.25rem;
	align-self: flex-start;
	margin-left: auto;
	transition: transform 0.3s ease;
}

#chat-toggle {
	cursor: pointer;
}

/* Dark mode toggle styles */
#dark-mode-toggle {
	display: none;
}

#dark-mode-toggle + label {
	border: none;
	background: none;
	font-size: 1rem;
	cursor: pointer;
}

#dark-mode-toggle + label::before {
	content: "🐓";
}

#dark-mode-toggle:checked + label::before {
	content: "🐸";
}

@media (prefers-color-scheme: dark) {
	#dark-mode-toggle:not(:checked) + label::before {
		content: "🐓";
	}
	#dark-mode-toggle:checked + label::before {
		content: "🐸";
	}
}

:root:has(#dark-mode-toggle:checked) {
	color-scheme: dark;
}

:root:has(#dark-mode-toggle:not(:checked)) {
	color-scheme: light;
}

/* Chat bubble related */
#user-input {
	width: 100%;
	/* Mozilla? */
	padding: 0;
	border: none;
	outline: none;
	background: none;
	color: inherit;
	font-size: inherit;
	font-family: inherit;
}

#user-input::placeholder,
.waiting {
	color: var(--color-gray-50);
	opacity: 0.7;
}

#chat-form {
	width: 100%;
}

#chat-form button {
	display: none;
}

@keyframes ellipsis {
	0% {
		content: ".";
	}
	33% {
		content: "..";
	}
	66% {
		content: "...";
	}
}

.waiting::after {
	display: inline-block;
	width: 1rem;
	content: ".";
	text-align: left;
	animation: ellipsis 1s infinite;
}

/* Chat reset */
.chat-reset {
	display: none;
	position: relative;
	align-self: flex-start;
	padding: 0 0.5rem;
	border: none;
	background: none;
	color: gray;
	cursor: pointer;
}

/* Add shadow to nav bubble */
.nav-bubble {
	box-shadow: var(--shadow-elevation-low);
}
.nav-bubble.chat-active {
	position: absolute;
	box-shadow: var(--shadow-elevation-medium);
}

.nav-bubble.chat-active .chat-reset {
	display: inline-block;
}

/* Only do nav switch on wide screens */
@media (min-width: 840px) {
	.nav-bubble {
		&:where(.chat-active) {
			/* left: calc(50% + 200px); */
			/* width: calc(640px - 200px); */
			left: calc(200px);
			width: calc(640px - 4.5rem);
		}

		&:where(.chat-active) > * {
			display: inline-block;
		}
	}
}

/* For mobile view */
@media (max-width: 839px) {
	/* Switch side nav off */
	.side-nav {
		display: none;
	}

	/* Mobile */
	.nav-phrase {
		display: inline-block;
	}

	body {
		flex-direction: column; /* Stack header and main content on narrow screens */
		max-width: 40rem;
	}

	main {
		max-width: none;
		padding: 1rem;

		/* Add a margin for when chat bubble is absolute */
		&:where(.chat-active) {
			margin-top: 2.25rem;
		}
	}

	.site-header {
		position: relative;
		width: 100%; /* Full width on narrow screens */
		max-width: 640px;
		height: auto;
		padding: var(--padding-y) var(--padding-x) 0;
		gap: 1rem 0.5rem;
	}

	/* Mobile-specific nav bubble styles */
	.nav-bubble {
		position: relative;
		left: initial;
		transform: none;
	}

	header {
		position: relative;
		height: auto;
		width: 100%;
		align-items: flex-start;
	}
}

/* Util */
.line-clamp {
	-webkit-box-orient: vertical;
	display: -webkit-box;
	line-clamp: 2;
	-webkit-line-clamp: 2;
	overflow: hidden;
}

.noise-container {
	z-index: -1;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-image: var(--noise-img);
	background-size: 182px;
	background-repeat: repeat;
	opacity: var(--noise-opacity);
	pointer-events: none;
}

/* Spotify widget */
.spotify-widget img {
	display: inline-block;
	border-radius: 0.25rem;
	box-shadow: var(--shadow-elevation-low);
}

/* Sidebar progress bar */
.progress-bar {
	position: fixed;
	top: 0;
	left: 0;
	width: 0.5rem;
	height: 100vh;
	transform: scaleY(0);
	transform-origin: 0 0;
	background-color: var(--color-gray-50);
}

@supports (animation-timeline: scroll()) {
	html {
		-ms-overflow-style: none; /* Internet Explorer 10+ */
		scrollbar-width: none; /* Firefox */
	}

	html::-webkit-scrollbar {
		display: none; /* Chrome, Safari, and Opera */
		width: 0;
		height: 0;
	}

	.progress-bar {
		animation-timeline: scroll(root block);
		animation-range: entry 0% cover 100%;
		animation: grow-progress linear;
	}

	@keyframes grow-progress {
		to {
			transform: scaleY(1);
		}
	}
}

/* Citation */
.citation {
	margin-bottom: 1rem;
	padding-left: 2rem;
	text-indent: -2rem;
}

.citation p {
	margin: 0;
}

/* Search results */
#search-results {
	max-height: 50vh;
	overflow-y: auto;
}
#search-results:has(.search-result) {
	margin-top: 0.25rem;
	border-top: 1px solid var(--color-gray-90);
}

.search-result {
	--border-width: 0px;
	display: block;
	padding: 0.5rem 1rem;
	border-bottom: 1px solid var(--color-gray-90);
	background: linear-gradient(var(--color-gray-50), var(--color-gray-50))
		left/var(--border-width) 100% no-repeat;
	color: inherit;
	text-decoration: none;
	transition: 0.3s ease;
	transition-property: background-size, background-color;
}

.search-result:hover {
	--border-width: 3px;
	background-color: var(--color-gray-90);
}

.search-result a {
	color: var(--color-gray-20);
	font-weight: bold;
	text-decoration: none;
}

.search-result p {
	margin: 0;
	color: var(--color-gray-50);
}

/* Wave divider */
#post-title {
	margin-bottom: 0.5rem;
}

:root {
	--wave-width: 30px;
	--wave-height: 10px;
}

.wave-divider {
	width: 100%;
	height: var(--wave-height);
	margin: 2rem 0;
	/* margin-top: 0.3rem;
	margin-bottom: 1rem; */
	background-color: var(--emoji-color);

	/* Wave mask */
	--wave-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='10'%3E%3Cpath d='M0 5q15-5 30 0t30 0' stroke='white' fill='none' stroke-width='1.5'/%3E%3C/svg%3E");

	/* Fade-out mask */
	--fade-mask: linear-gradient(
		to right,
		transparent,
		black 15%,
		black 85%,
		transparent
	);

	/* Combine masks */
	mask-image: var(--wave-mask), var(--fade-mask);
	mask-size:
		var(--wave-width) var(--wave-height),
		100% 100%;
	mask-repeat: repeat-x, no-repeat;
	mask-composite: intersect;

	/* For webkit browsers */
	-webkit-mask-image: var(--wave-mask), var(--fade-mask);
	-webkit-mask-size:
		var(--wave-width) var(--wave-height),
		100% 100%;
	-webkit-mask-repeat: repeat-x, no-repeat;
	-webkit-mask-composite: source-in;

	animation: wave-animation 5s linear infinite;
}

@keyframes wave-animation {
	0% {
		mask-position:
			0 0,
			0 0;
		-webkit-mask-position:
			0 0,
			0 0;
	}
	100% {
		mask-position:
			var(--wave-width) 0,
			0 0;
		-webkit-mask-position:
			var(--wave-width) 0,
			0 0;
	}
}


		
		
			/* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism-tomorrow&languages=markup+css+clike+javascript+bash+python */
code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}

			lite-youtube {
    background-color: #000;
    position: relative;
    display: block;
    contain: content;
    background-position: center center;
    background-size: cover;
    cursor: pointer;
    max-width: 720px;
}

/* gradient */
lite-youtube::before {
    content: attr(data-title);
    display: block;
    position: absolute;
    top: 0;
    /* Pixel-perfect port of YT's gradient PNG, using https://github.com/bluesmoon/pngtocss plus optimizations */
    background-image: linear-gradient(180deg, rgb(0 0 0 / 67%) 0%, rgb(0 0 0 / 54%) 14%, rgb(0 0 0 / 15%) 54%, rgb(0 0 0 / 5%) 72%, rgb(0 0 0 / 0%) 94%);
    height: 99px;
    width: 100%;
    font-family: "YouTube Noto",Roboto,Arial,Helvetica,sans-serif;
    color: hsl(0deg 0% 93.33%);
    text-shadow: 0 0 2px rgba(0,0,0,.5);
    font-size: 18px;
    padding: 25px 20px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    box-sizing: border-box;
}

lite-youtube:hover::before {
    color: white;
}

/* responsive iframe with a 16:9 aspect ratio
    thanks https://css-tricks.com/responsive-iframes/
*/
lite-youtube::after {
    content: "";
    display: block;
    padding-bottom: calc(100% / (16 / 9));
}
lite-youtube > iframe {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    border: 0;
}

/* play button */
lite-youtube > .lty-playbtn {
    display: block;
    /* Make the button element cover the whole area for a large hover/click target… */
    width: 100%;
    height: 100%;
    /* …but visually it's still the same size */
    background: no-repeat center/68px 48px;
    /* YT's actual play button svg */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');
    position: absolute;
    cursor: pointer;
    z-index: 1;
    filter: grayscale(100%);
    transition: filter .1s cubic-bezier(0, 0, 0.2, 1);
    border: 0;
}

lite-youtube:hover > .lty-playbtn,
lite-youtube .lty-playbtn:focus {
    filter: none;
}

/* Post-click styles */
lite-youtube.lyt-activated {
    cursor: unset;
}
lite-youtube.lyt-activated::before,
lite-youtube.lyt-activated > .lty-playbtn {
    opacity: 0;
    pointer-events: none;
}

.lyt-visually-hidden {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
		</style>
	</head>

	<body style="--nav-item-active: 1;">
		<div class="noise-container"></div>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header class="site-header">
			<nav>
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<div class="nav-bubble">
    <button id="chat-reset" class="chat-reset" aria-label="Reset chat">↺</button>
    <div id="navPhrase" class="nav-phrase">
        
            
            <a href="/" style="text-decoration: none;">Home</a>&emsp;<a href="/projects/" style="text-decoration: none;">Projects</a>&emsp;<a href="/blog/" style="text-decoration: none;">Blog</a>&emsp;<a href="/about/" style="text-decoration: none;">About Me</a>
        
    </div>
    <form method="post" id="theme-form" class="theme-toggle">
        <input type="checkbox" id="dark-mode-toggle" name="theme" value="dark" aria-label="Toggle dark mode">
        <label for="dark-mode-toggle"></label>
    </form>
</div>
				<div class="side-nav">
					<ul class="nav-list">
						<li id="chat-toggle" class="nav-item">
							<span class="nav-link">Welcome!</span>
						</li>
							<li class="nav-item">
								<a href="/" class="nav-link">
									Home
								</a>
							</li>
							<li class="nav-item">
								<a href="/projects/" class="nav-link">
									Projects
								</a>
							</li>
							<li class="nav-item">
								<a href="/blog/" class="nav-link">
									Blog
								</a>
							</li>
							<li class="nav-item">
								<a href="/about/" class="nav-link">
									About Me
								</a>
							</li>
					</ul>
				</div>
			</nav>
		</header>

		<main id="skip">
			


<div class="progress-bar"></div>

<article class="post">
  <h1 id="post-title">
    43 rpm&ensp;
  </h1>

  <ul class="post-metadata">
    <li>
      <time datetime="2018-11-02">02 November 2018</time>
    </li>
      <li>
        <a href="/tags/posts/" class="post-tag">posts</a>
      </li>
  </ul>

  <div class="wave-divider" style="--emoji-color: #f0f0f0;"></div>

  <h3 id="title-card" tabindex="-1">Title Card <a class="header-anchor" href="#title-card">#</a></h3>
<blockquote>
<p>“Indeed a lake is within me, solitary and self-contained;
but the river of my love draws it off-down to the sea!”</p>
</blockquote>
<p>Cut from black. A shot of the sky in silence. Branches of trees are tugged by the wind and framed in a blue tarp, half-filled with clouds. After a few moments, inches above the grassy ground is the top half of Clover on her back, watching the sky. A thick head of opal brown hair, filled with shades of red, is spread over the grass and over an oversized white t-shirt she’s wearing. Clover’s face is freckled and pale. Hers eyes are set neatly under her thick eyebrows, and have low rings under them, making her whole gaze look deeply fatigued but at peace. Sound of those heavy branches in the wind fade in, and after half a minute, the shot cuts to the same angle from looking up at ceiling of her room, light blue with a ceiling fan slowly rotating.</p>
<h3 id="room" tabindex="-1">Room <a class="header-anchor" href="#room">#</a></h3>
<p>A woman in her late forties, Diane, is seen sitting on a chair in the corner of Clover’s dorm, peacefully watching her sleep. In this moment, the sound of the wind, which has persisted through the transition, begins to shift to the ring of a radiator and the ruffling of sheets can be heard behind the shot. It’s around 9am and soft light pours in from an adjacent window. A number of angles from Clover’s room are shown; her dresser below the window, jackets and leggings retreated in corners are Diane is gone now. From a desk at the height of her bed, Clover is beginning to wake up but has rolled over to face the wall bordering her bed. Her hair is spread out over her pillow, which is a light blue, like the sheets. A cell phone rings, vibrating the sheets and lighting up the wall where she’s curled up. The shot moves to her face where a fly has landed on her cheek.</p>
<h3 id="office" tabindex="-1">Office <a class="header-anchor" href="#office">#</a></h3>
<p>As she weakly swipes it away, the scene cuts to Clover now sits in a warmly lit office, it’s mid-afternoon and Clover’s sitting in a wide blue sofa, a dark green button down and jeans, with one leg tucked under her. The area is clean with lots of windows, a desk, sofa, and two chairs. Diane sits in a chair opposing Clover. Diane has a posture that seems to have grown only more elegant in age. She wears a gray cardigan too big for her shoulders slouches over her thin frame. She has short graying hair, thin glasses, and the lean face of an athlete or someone the sun had gifted with agelessness. She keeps a pen and pad by her side, looking carefully at Clover’s withdrawn daze. On the walls are various generic landscapes that were most likely picked up at yard-sales.</p>
<p><strong>Diane:</strong> &quot;Well, its good to see you again.&quot; A small smile forms from a pair of even smaller lips.</p>
<p><strong>Clover:</strong> &quot;You too” And she turns to face Diane, flashing a smile.</p>
<p><strong>D:</strong> “So, how have things been going this week?”</p>
<p><strong>C:</strong> “They've been good. I think things are getting better, but you know you can never be sure right away.” She pauses “But, yeah, definitely better than last week.”</p>
<p><strong>D:</strong> “Right, well… good!” She take a moment to look at Clover once more. Her gaze falls to the note pad. “And it's all about progress, you know, one week at a time. Some weeks might be better, like this one, others worse and as long as we’re working on it, we’ll be exploring more and more solutions.”</p>
<p><strong>C:</strong> “Yeah,&quot; Clover responds, looking more earnest than she believes.</p>
<p><strong>D:</strong> “So, how have you been able to sleep recently since our last suggestions, with writing and-?”</p>
<p><strong>C:</strong> “Yeah, yeah, it’s better, it's hard to make time for it some nights. But its been fun taking my mind off of things before bed. It's still tough since, eventually, I'll have to decide to quit writing and try sleeping&quot; she pauses &quot;and that's when I start to struggle again. I wish I could write myself to sleep, but my hand gets tired faster than my brain.&quot; She continues, &quot;My teacher told me almonds could help too?&quot;</p>
<p><strong>D:</strong> “Yeah, I’ve heard that too, some nutritionists believe a handful might help some people before bed, though I'm not sure why, so don't take my word for it&quot; she chuckles but becomes more serious. &quot;But I’m glad you’ve been trying out writing. If I may ask, what kinds of things do you usually write about?”</p>
<p><strong>C:</strong> “Oh, um, its mostly just my imagination.” Clover brings her hands to rub her neck. She looks uncomfortable, almost guilty, as she thinks about her answer.</p>
<p>After she finishes, the camera stays on her, listening to Diane. The sound of her voice drifts (pans left) and fades into the distance, the buzzing of a fly intensifies (panned right). She gets distracted and watches the insect fly upwards towards Clover’s ceiling fan, in a cut back to her bedroom.</p>
<h3 id="room-1" tabindex="-1">Room <a class="header-anchor" href="#room-1">#</a></h3>
<p>Clover is groggily staring at her phone. After a few seconds of reading. she frantically shakes out of bed, her long brown hair swings with her, as she hops into jeans, sneakers, a sweater and grabs her keys from the top of a dresser and slams the door. The fly comes to rest on her blanket, which has now settled on the hardwood floor, among other scattered miscellanies. Her running feet are heard outside along the hall for a moment, soon, out of audible range. From the inside of the dorm-rooms, Clover’s feet are seen sprinting past a series of doorways. The sound of her stomps is now being followed, along with heavy breath, from one hall to the next, on and off carpet and wood and finally down a stairwell. Her feet are followed from behind, as the run down the last hall and are trailed through the exit.</p>
<p>A heavy wooden door of the dorm bursts open with the sound of birds chirping in the early morning. Clover looks around the campus as if expecting to find the source of her stress, still panting from her run through the halls. She slowly leans over, her hands on her knees, breathing erratically, trying to find a natural pace of breath again with whispered counts upwards from “one”. The campus is empty, and a wide shot puts Clover in a yard where other tall and thin dormitories are sat side by side like studious guardians. Suddenly, the sound of her name being shouted has grown in volume, enough to break through her breaths. Clover stops breathing and quickly turns her head towards the shouts</p>
<h3 id="lot" tabindex="-1">Lot <a class="header-anchor" href="#lot">#</a></h3>
<p>Her turn cuts the shot to an empty parking lot at night. She’s now sitting, staring up at a florescent light, coming from a single streetlamp. She’s in different clothes, a heather gray sweatshirt and gym shorts, she sits between the headlights of a car, her back resting against the front bumper. The electric buzz of the lamp rolls in and behind her the muffled yelling she had heard before returns more clearly; it’s a muffled male voice, angrily shouting her name but goes quiet moments later. She reaches her arms over to cover the headlights on either side of her, creating red outlines around her hand and darkening her face. There’s nothing visible beyond what’s lit by the street lamp and the car headlights and in fact, the parking lot looks a lot like an island suspended in the void. The asphalt is cracked and ribbed from the movement of earth underneath it. The light hum of a small engine enters soon after. The scene cuts to Clover walking away from the car. A door behind her opens and the car door bell begins ringing. Christ steps out of the car.</p>
<p><strong>Chris:</strong> “Clove! Where are you going!?” An irritated voice behind her yells “Why are you doing this? We can talk in the car - Clove! - what is wrong with you?” Clover turns around.</p>
<p><strong>Clover</strong>: “Do you fucking think it’s okay for you to act that way around my family?” Clover’s yelling. Her voice strains from holding back tears and so it comes out in bursts. While she says this her eyes dark around the silhouette of the figure, partially blinded by the headlines she’s standing in front of. ”How fucking old are you? I’ve told you how much it hurts him - can’t you be fucking respectful- why can’t you - just apologize for once!?”</p>
<p><strong>Ch</strong>: “What? Was I supposed to not say something while your brother just starts screaming at the top of his lungs at 2am? How was I supposed to know he had a thing? He was screaming all weekend.” Chris’s voice is just as loud but less uncertain. Clover walks backwards from the headlights.</p>
<p><strong>C:</strong> “Go home. I don’t want to see you. I’ll get someone to pick me up, okay?” She takes a breath. “It’s fine, you can leave, Chris.” Clover looks less irritated and more exhausted from just yelling itself.</p>
<p><strong>Ch:</strong> “I told you I forgot, okay? I hadn’t slept in 2 nights! I wasn’t mad at him, I just wanted him to know there were people trying to sleep - I’m sorry, okay?” For the first time we see his face, in a close up lit by the light on within the opened car. Chris has curly brown hair and is wearing thick glasses. He’s upset too, his face is tense and his lips pursed as his starts to say something but stops before the first word. He tries again, his eyes no longer looking at Clover in the headlights. He anxiously looks up at the streetlight and behind him and shifts uncomfortably in his jacket. “Clover, I’m really sorry it was late and I got worked up trying to stay cool about it all. I should have talked to you about it before. I...”</p>
<p><strong>C:</strong> “Why is it that only now do you apologize for this kind of stuff? You wait until the last minute to say something - which is usually insulting and insensitive - and then only after I get upset and talk to you about it do you even consider you were wrong. You weren’t like this before, Chris.” She says the last line more quietly.</p>
<p><strong>Ch:</strong> “I’m tired of this, you aren’t always right Clover. There are somethings that normal people can’t be expected to deal with. I can’t be sensitive to everything you are or I’d be living your life! I have my own life and some things bother me - like they would bother everyone else! I honestly don’t care that you have your own world, just don’t bring me into it. Don’t try to make everyone feel like you, ok? That’s the problem.” Clover looks up in deep odium. Her dark brown eyes are sunken in dark pools around her eyes. Her eyebrows furrow and she tucks her long brown hair behind her ears with a sigh. She stares up at the night sky. Even more tiredly, Clover responds.</p>
<p><strong>C:</strong> “Look, Chris, I don’t know. I don’t know at what point something becomes disrespectful. But I know that there are other people living different lives. You and I are great examples of this. There’s been just enough tolerance between us for it to work so far. And I’ve never tried to make you feel the same way as me. I can’t imagine I’ve asked for a lot of sympathy, since it’s usually met with some long explanation about how it’s “unrealistic” for me to be feeling this way! But it’s just not worth arguing at some point if we can’t even relate to the events happening in our lives.” Clover looks back up at the sky for relief. “Yeah, know what, you might be right - I feel like I’m up on the moon sometimes and you’re on the total opposite side of Earth. And we’re always rotating and I’m always walking around trying to figure where the hell you are and you’re just sitting, sitting there watching me as you swing around and pass me again and again.”</p>
<p><strong>Ch:</strong> “What can I do, Clover?” Chris hold his hands in the air, waiting for Clover to respond.</p>
<p>Clover turns her back to the car and Chris and her face quickly tightens up and tears begin in well up in her eyes. She starts to pace away from the car and move across the parking lot, the light behind her now. The height of the shot elevates slowly from her shuffling sneakers, her tense hands gripping her phone, onto her face, still crying. Over her shoulder, we can see the blurry figure of a person leaning out from the open door of the driver’s seat of the sedan. The sound of Chris’s voice fades and echoes across the parking lot, we can still hear him yelling out for her as she begins to run. The sedan cranks on and drives away. Clover’s runs out of the light from parking lot. She pulls out her phone and turns on the flashlight. Both the light from the screen and from the flash illuminate her. Clover looks up from her phone and the shot cuts to a forest at the edge of the lot. She tops walking for a moment to stare up at it in awe. The sounds of the scene and a low drone rises up as if emanating from the forest itself, getting fuller and loud. As it does, Diane’s response returns in the darkness and the drone dissipates in an instant.</p>
<h3 id="office-1" tabindex="-1">Office <a class="header-anchor" href="#office-1">#</a></h3>
<p><strong>Diane:</strong> “So, what are those worlds like? Could you explain them to me a little bit? Are they like daydreams?” The shot returns to Diane’s office, where the conversation has continued.</p>
<p><strong>Clover:</strong> “Kind of, yeah, they’re drawn from the past, or at least in the way I’m reminded of it.” She pauses and it cuts back to a focus on Clover sitting with Diane. “I like to think about it as salvaging. Scraps of memories that, just, stick out for one reason or another. Like, last night I was writing about a memory I had as a kid. I remember one morning watching my mom roll the trash can up the driveway; I was looking from the window of my parents’ bedroom. I must have been 5 or 6.” As Clover’s speaking, the angle rotates from her profile towards the window, focusing on a wisteria tree, climbing the edge of the office outside. It focuses on a bundle of its soft pink flowers hovering in front of the window. Clover continues with the focus now on the tree. “And I remember how I felt watching my mom. She had no idea I was watching her, and the event was so mundane, yet, it felt so weird at the time. Now I probably would call it something like being “contemplative”, which I wasn’t really ever. It was odd, it was like, the realization that my mom existed, as a person, in a world without me. Of course, I must have known that even then, but I had just never seen it so closely” Clover smiles as she finishes her story, Diane looks down at the pad in her hands and quickly takes one note.</p>
<p><strong>D:</strong> “Huh, well, that’s a lot deeper than I was expecting. I don’t know why you’re a math major!” She giggles. “So how does that exactly make a world? Are you reminiscing or -”</p>
<p><strong>C:</strong> “Yeah, I mean a bit? It’s hard not to when writing stories. I mean, I can’t not write from experience, right?” She pauses to think “What do you think? Should I stop? I think they give me a chance to reconnect? Or explore the what I remember of the past, now, being older and all.</p>
<p><strong>D:</strong> “No, no, not at all. I think that’s wonderful, and therapeutic I’m sure! I was just curious how you felt about them and whether they felt good for you. That’s all.”</p>
<p><strong>C:</strong> ”Yeah, I think - it’s just an exercise that I can tell myself is productive.” Clover leans her head on the arms of the sofa she’s sitting on. “Do you think about old memories often?”</p>
<h3 id="suburbs" tabindex="-1">Suburbs <a class="header-anchor" href="#suburbs">#</a></h3>
<p>The scene cuts to Clover squeezing through the trimmed wall of a hedge. It’s midnight. Crickets and cicadas buzz loudly around the shuffle of Clover’s figure through snapping and whipping twigs that trail her. She walks onto a street of a neighborhood. She left the yard of a large brick house through a wall of vegetation that surrounds it.</p>
<p><strong>C:</strong> “Come on!” She whispers loudly to the fern, and a second body bursts from the trimmed hedge. “Come on! Let’s go!”</p>
<p><strong>Nico:</strong> “I’m coming! Ow, ow, was this the best route?” She frees her leg from the hedge and jogs over to Clover. “And more importantly, do you even know where’s the lake from here?”</p>
<p><strong>C:</strong> “Well, I got here, didn’t I? I can figure my way over there too, or we’ll just be wandering the night till morning then.” She grins wide and tucks her loose brown hair, already in a bun, behind her ears. Clover is excited, unstressed and unrestrained. She pulls some earplugs from her pocket. “You brought yours too right? Don’t tell me you forgot?”</p>
<p><strong>N:</strong> “I have it, I have it! she awkwardly pulls her iPod out from her back pocket and shakes it in front of Clover. “See, I don’t forget. I even put the songs you sent me on it. And, let me tell you, that took me hours, sooo-” Nico’s eyes float to the tree branches overhead as she trails off.</p>
<p><strong>C:</strong> “Good! Now at least you have some good music on that thing” She grins and leans in with her headphones already in. “Let’s go!”</p>
<p>At that moment, Clover puts in her headphones, quickly fidgets with her iPod and begins to dance in the middle of the street. Clover’s dance is goofy and a bit uncoordinated. She bobs and swings her arms around across the street, keeping her eyes and grin on Nico as she too, though much more slowly, set her iPod up to go as well. Clover dances over to Nico after a moment.</p>
<p><strong>C:</strong> ”Oh, oh, okay so, open the playlist I sent you - I almost forgot - here, let’s me see, yeah, and there.” Clover smoothly works the iPod to the playlist, “Now... I’m going to press play at the same time as you and we should be in sync for as long as this playlist lasts!”</p>
<p><strong>N:</strong> ”You mean you hadn’t put any music on yet?”</p>
<p><strong>C:</strong> ”No! I was waiting for your slow ass!”</p>
<p><strong>N:</strong> ”Then, what were you dancing to, weirdo?”</p>
<p><strong>C:</strong> “You of course!” Nico smiles at this and shyly shakes her head. “Okay, ready yet?”</p>
<p><strong>N:</strong> “How long is this playlist, again?”</p>
<p><strong>C:</strong> “I think we’ll be good until 4 or 5am!”</p>
<p><strong>N:</strong> “Oh my god,” Nico rolls her eyes. &quot;I hope your taste in music is as good as you said!”</p>
<p>The camera swings to Clover who is already dancing down the street and it ascends upwards still keeping a focus on the street. Above the trees you can see the neighborhood fully enclosed within the branches of a suburban grove of oaks. The perspective gazes down at the street while moving forward, still hovering above the two bodies walking between the edges of the tree branches until the branches converge in a thicket and the shot fades to black.</p>
<p>Nico and Clover are now center frame, walking along a road with fewer houses, street lights and trees, at the edge of the neighborhood. It’s much darker, with fewer street lamps along the street. Beside them is a plot of undeveloped land, where construction crews are in the middle of filling out the frames of 6 or 7 houses. The unfinished buildings stand like skeletons over the field. Clover points beyond the houses to a tree-line about half a mile away.</p>
<p><strong>C:</strong> “Through there. I’m almost certain” She pulls out Nico’s left earbud to tell her.</p>
<p><strong>N:</strong> “And you saw this pond where?</p>
<p><strong>C:</strong> “ Online, I looked it up! It’s right on the other side of those trees! Someone said that the builders here wanted to buy that land but apparently someone privately owns that land and wouldn’t sell to them.”</p>
<p><strong>N:</strong> “You sure about that?”</p>
<p><strong>C:</strong> “Yeah, I mean, it was the only comment on Google. I’d say it’s about 50/50. Who knows.”</p>
<p><strong>N:</strong> “That’s odd, maybe it’s a private fishing pond?”</p>
<p><strong>C:</strong> “I’m not sure. But, whatever it is - I think there’s a dock in the middle. Did you bring something to swim in?” Clover smirks unevenly, waiting for Nico’s response.</p>
<p><strong>N:</strong> “Oh please. Like I’m going to hop in a random pond in the middle at midnight.”</p>
<p>Clover shrugs and keeps walking, now off-road, through the untrimmed yards of the new houses. Behind Clover, Nico is noticeably reserved, her arms are kept close to her heavy wool sweater and is hesitant, at first, to step off the road but eventually joins Clover. Clover, holds her hands up to the sky, swinging them back and forth as she’s singing along with current track on her headphones. Her voice sounds quiet next to the roar of insects that fills the field. Nico has caught up with Clover and both are now moving more cautiously as the tall, dense grass begins to hide their feet. They move in unison quietly, for a while. The sound of their steps is loud and make a satisfying crunch over dry reeds.</p>
<p>Suddenly, Nico’s arms wrap Clover’s shoulders from behind, her head falling on a shoulder and they come to a stop before the tree-line. It’s playful and unexpected, and uncoordinated, causing the two to stumble forward and Clover’s earbuds to fall out. For the first time, the Clover’s bright countenance begins to sink as Nico’s hands come together over her chest. Clover takes a sharp breath in at Nico’s gesture. With the music gone, she starts reorient to the deafening sound around her and begins to look around at where she is as if unaware of how she got here. We stay here watching her and Nico for a while, who has retracted her arms to the tops of Clover’s shoulders and is also staring at the woods. As the growl grows, the scene cuts to outside Clover’s dorm, where she is still recovering from her sprint through the dorm.</p>
<h3 id="home" tabindex="-1">Home <a class="header-anchor" href="#home">#</a></h3>
<p>Her breathing returns to normal. She begins to quickly walk towards the parking lot, where the sun has begun to set and gets into her car. From the inside of her old tan minivan, she pulls out her phone to dial and begins to drive out of the lot.</p>
<p><strong>C:</strong> “Mom? You there? Is he alright? Is he okay? I’m driving over right now, okay?” She pauses to listen to a sharp voice through the phone “I know, I know you did. It’s okay. I’ll be there soon, okay? Ok? He’s going to be okay. I’m heading over. Don’t worry - yes, of course. I love you. Bye.”</p>
<p>She turns on the emergency blinkers and speeds through the highway onto the offramp. Entering into a neighborhood, Clover swerves past stop signs and worried parents that watch front yards, some picking up the paper, rolling out the garbage bins, watering the yard, chatting, or holding back their kids from the accelerating vehicle. Crimson flashes of light begin to appear on her face as she finally slows down. Outside, theres a commotion around the front yard of a small single-story house. Police are trying to speak with an older woman who is sobbing on the brick steps of her house. Clover slams on the brakes in front of the lawn, opens her door and runs over, forgetting to close it in her haste.</p>
<p><strong>C:</strong> “Mom, mom, what happened?!” Clover is holding her mother, Samantha, on the steps. She brushes Samantha’s gray hair from her face. Clover’s startled by the number of wrinkles under her mom’s eyes and hugs her close. Tears have collected in those wrinkles. “What happened, tell me. Did he have another episode.”
Samantha: “He - he ran away, Clover. I tried to hold him and he ran away from me.” Clover notices the sanguine bruises on her face and blood on the edges on her mouth.</p>
<p><strong>C:</strong> “Mom... what happened? Are you okay? Did he hit you? Why is there blood on your face?”</p>
<p><strong>S:</strong> “Clover, clover, it’s alright, it’s okay you know he gets that way, it was my mistake to try and hold him - he was trying to escape. He was screaming and thrashing around in his room. I went in to see what was happening”</p>
<p><strong>C:</strong> “No, mom, he’s never done that before. Did he run away? Where is he?”</p>
<p><strong>S:</strong> “He - ran out through the back. I couldn’t chase him - he knocked me down! I’m sorry, Clover, I’m sorry.”</p>
<p><strong>C:</strong> “Mom, its okay, it’s alright, we’re going to find him don’t worry. I’ll find him.”</p>
<p>Clover turns around to two police officers, watching the scene and chatting on radio. Noticing that Clover has finished talking, a tall man with crew cut brown hair walks over.</p>
<p><strong>P1:</strong> “Are you the sister of Cecil Dawning?”</p>
<p><strong>C:</strong> “Yes”</p>
<p><strong>P1:</strong> “Okay good, as your mom might have told you, your brother ran off about an hour ago from the back of your home, south.” The officer points through the house, over towards the woods that lie behind Clover’s neighborhood. “We are going to need to ask you some questions about your brother if you...” The officer’s voice trails off into the distance and the sound of crickets and cicadas rise.</p>
<p>Clover is struck with fear. Her facial expression has changed as the shot returns to her face. Her eyes that were once looking in the direction of his finger, now seem to be looking nowhere, absent of focus. Her figure is outlined with an aura of flashing red and blue from the police car in the lawn.</p>
<p>Suddenly, the shot seamlessly changes to night as she turns around towards the lawn. Everyone is gone, the police, their car, Samantha are all absent as clover continues to star into the distance. Her face is now lit by the moon overhead and its cool blue light covers the rest of the neighborhood. All colors are now in neutral shades of blue. The noise of the crickets and cicadas continue.</p>
<p>Without notice of the change, Clover opens the screen door in front of her and begins to walk through her house. The house is pitch black. From over Clover’s shoulders, the only light that is shining through is that of the back door. It beams light across the living room where a cabinet has been toppled, spilling books and shattered ceramic and glass across the carpet floor. The sound of Diane’s voice breaks through the silence. It speaks over the current scene as the visuals continue.</p>
<p><strong>D:</strong> “To answer your question Clover, I do think about my memories. Often, in the same way as you. Only I’ve have about twice your life to think about, twice as many decisions with slip-ups and joys. But you do get better at it, at least you care less about your frequent mistakes and more about the disturbances you’re convinced are unavoidable.”
Clover looks down at the mess but is uninterested having fallen under some sort of delirium. Her gaze returns to the door, and continues to walk through the living room.</p>
<p><strong>C:</strong> “But do you ever fear that you’ll forget, one day? What will happen when there are no more clues to your memories. That sudden rush of the experiences you had forgotten when you hear an old voice, or see a face, are harder to recall, and even more dependent on the pure chance of bumping into those people or places I spent time with.”</p>
<p>By the back door is another room, whose door is open. Clover walks up to the backdoor and looks left, into the open bedroom. There, in the center of the room is a bare mattress made visible by the light shining through a small window across from her, covered partially with the torn sheets. A mangled mess of clothes and trash are pilled in corners of the bedroom; nothing is in order. The walls are bare and speckled with small punctures. Besides the bed, there’s a dresser and old chair that’s been overturn. Clover looks over the disarray and takes a calm inhale. Now looking out from the ground of the bedroom, she turns away from the doorway and opens the backdoor to outside.</p>
<p><strong>C:</strong> “I mean where do they go? Where is it all? The high-school dances and snacks my mom would bring me Saturday afternoons? Those cartoons I watched and all the hikes I spent sprinting up the mountain like a goat, falling and bleeding all over the car? Biking until the late evening wind sent me home, missing dinner, and staying up late with an assignment and never learning to plan ahead. Taking a nervous hand like I would a pillow at night. I mean, they’re all there. But their experience... it wasn’t poetic.” She trails off with a sigh.</p>
<p>Looking outside her house, she’s confronted with a tall thicket of trees 20 feet from her. She turns back towards the inside of the house, where her turn returns the scene to daylight with its sound muffled, her mother’s cries and the police officer calling her name from the other side of the house are visible, asking her to come back to answer questions, and telling Clover they are already searching for her brother. Those sounds are muffled, and don’t puncture the sound of night. Interrupting the commotion at hand, she returns towards the forest, again transitioning to night, and bolts into the woods. The pitter-patter of crunching leaves can be heard even after the darkness of the woods obscures her.</p>
<h3 id="forest" tabindex="-1">Forest <a class="header-anchor" href="#forest">#</a></h3>
<p>Cut to black. The sound of steps in on the forest floor are all that can be heard. Clover slowly becomes visible in the light of the moon that’s broken through the tree tops. The shot follows her from the front, the sound of footsteps crunching through the fallen leaves. The steps quietly multiply, and soon Clover’s steps aren’t the only ones in the forest. She stops for a moment and the other footsteps stop a half-second after her. Clover looks fear-struck, and begins to turn around but stops, her head bent at her shoulder. The air is cold. A close up of her lips show her breaths, warm clouds, entering and exiting through her mouth. Carefully, she returns her gaze ahead. She continues to walk forward and the sound of footsteps are now her own. Soon, Clover comes to a clearing. Rising from behind her back, a large, dark pond stretches before her. She walks towards the body of water. The scintillating shape of the moon, hovers over the surface of the pond. Towards the edge of the pond that Clover’s facing, there’s an old wooden dock. As she moves towards the dock, she begins to make out the outline of a person sitting at its end. She walks over to the edge and sits down, feet dangling over the edge. We watch the two from the beginning of the dock. Clover rests her head on the shoulder of the person she still hasn’t looked at yet. A close shot of Clover, whose face is lit by the pond’s clean reflection of the moonlight.</p>
<p><strong>C:</strong> “Was I over-detailed in their descriptions?” She starts wearily, “How else was I supposed to remember? Build? Start again? Turn backwards? for the sake of a road ahead.” Her hands thrusting towards the pond air. “And now, they’re getting worn out and indiscernible - from the daily rotation of hormones and maddening routines, like a spool of tape. We’ve just dunked it in developer and pulled it out for a fresh exposure.” She inhales and exhales and a smooth breeze descends from the treetops over the water, “I wish I wasn’t still spending the mornings thawing out from sleep. Spending however many minutes remembering, again, where I was when I fell asleep and that my eyes are now open. I sit up, silence slowly rubs my back and I look over to grimace at all the things I’ve surrounded myself with.”</p>
<p>Clover lays back against the dock, her eyes looking up at the stars. An owl starts to coo across the open air.</p>
<p><strong>C:</strong> “But, I’ve been thinking, too, of frightening thoughts, with a gravity of their own. Where, if you’re careful and patient, you might be able to watch existence orbit around their place. They roam around the sky, these massive harmonies, passing through the day silently - undetected. Until, at last, someone looks up. They look up and there it is, the atmosphere stretched past the edges of your eyes. A sky, filled with dancers, the phantoms of new memory, all the days I’ve been searching for that I’d thought I lost. The planet starts to slip from the upturned head, maybe mine. And they begin dancing too! Oh! all those afternoons sought for their nothingness; our simple want that was patient past its years. Instead, we solemnly watched it pass, mysteriously, like a sun setting out of tune.” She smiles at the thought and stops. The figure that was sitting next to her is gone.</p>
<p>Looking down unto the dock, the shot elevates until the dock, the lake and finally the forests come into view. The perspective continues to rise and the scene fades to black.</p>
<h3 id="end" tabindex="-1">End <a class="header-anchor" href="#end">#</a></h3>


  <div class="wave-divider" style="--emoji-color: #f0f0f0;"></div>
    <nav class="post-nav">
        <a href="/blog/2019-10-01-memory-avalanches/" class="post-nav-next">
          <span class="post-nav-title">Memory and Modality through The Avalanches&#39; Wildflower and &quot;The Was&quot;</span>
          <span class="post-nav-arrow">→</span>
        </a>
    </nav>
</article>
		</main>

		<footer></footer>

		<!-- This page `/blog/2018-11-02-43-rpm/` was built on 2024-10-07T08:33:24.197Z -->
	</body>
</html>
<script defer="">
	// Minimal JS for handling user preference
(function () {
    const toggle = document.getElementById('dark-mode-toggle');

    // Set initial state based on localStorage or system preference
    const storedTheme = localStorage.getItem('color-scheme');
    if (storedTheme) {
        document.documentElement.setAttribute('data-theme', storedTheme);
        toggle.checked = storedTheme === 'dark';
    }

    // Handle toggle changes
    toggle.addEventListener('change', () => {
        const newTheme = toggle.checked ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('color-scheme', newTheme);
    });

    // const form = document.getElementById('theme-form');
    // Handle form submission (for no-JS fallback)
    // form.addEventListener('submit', (e) => {
    //     e.preventDefault();
    //     const formData = new FormData(form);
    //     fetch('/set-theme', {
    //         method: 'POST',
    //         body: formData
    //     }).then(() => {
    //         location.reload();
    //     });
    // });
})();

		// Generate a random user ID if not already stored
function getUserId() {
	return (
		localStorage.getItem("userId") ||
		localStorage.setItem(
			"userId",
			"user_" + Math.random().toString(36).slice(2, 11),
		)
	);
}

function sendMessageToWorker(message) {
	const baseUrl =
		window.location.hostname === "localhost" ||
		window.location.hostname === "127.0.0.1"
			? "http://localhost:8090"
			: "";
	const isDarkMode =
		document.documentElement.getAttribute("data-theme") === "dark";
	const animalParam = isDarkMode ? "frog" : "chicken";

	updateNavPhrase(isDarkMode ? "Ribbit" : "Cluck", true);

	// Get the body content
	const bodyContent = document.body.innerText;

	// Prepare the message with the body content
	const fullMessage = `Current page content:\n${bodyContent}\n\nUser message: ${message}`;

	fetch(
		`${baseUrl}/ai?message=${encodeURIComponent(fullMessage)}&animal=${animalParam}&userId=${getUserId()}`,
	)
		.then((response) => {
			if (!response.ok)
				throw new Error(`HTTP error! status: ${response.status}`);
			return response.body.getReader();
		})
		.then((reader) => {
			let accumulatedResponse = "";

			function readStream() {
				let buffer = "";
				reader.read().then(function processText({ done, value }) {
					if (done) {
						updateNavPhrase(accumulatedResponse, false);
						return;
					}

					buffer += new TextDecoder().decode(value);
					let newlineIndex;
					while ((newlineIndex = buffer.indexOf("\n")) !== -1) {
						const line = buffer.slice(0, newlineIndex);
						buffer = buffer.slice(newlineIndex + 1);

						if (line.startsWith("data: ")) {
							try {
								const jsonStr = line.slice(5).trim();
								if (jsonStr === "[DONE]") {
									updateNavPhrase(accumulatedResponse, false);
									return;
								}
								const data = JSON.parse(jsonStr);
								if (data.response) {
									accumulatedResponse += data.response;
									updateNavPhrase(accumulatedResponse, false);
								}
							} catch (error) {
								buffer = line + "\n" + buffer;
								break;
							}
						}
					}

					return reader.read().then(processText);
				});
			}

			readStream();
		})
		.catch((error) => {
			console.error("Fetch error:", error);
			updateNavPhrase("Sorry, something went wrong.");
		});
}

function updateNavPhrase(text, isWaiting = false) {
	const navPhrase = document.getElementById("navPhrase");
	navPhrase.textContent = text;
	navPhrase.classList.toggle("waiting", isWaiting);
	navPhrase.classList.toggle("clickable", !isWaiting && text.length > 0);
}

document.addEventListener("DOMContentLoaded", function () {
	const chatTrigger = document.getElementById("chat-toggle");
	const talkBubble = document.querySelector(".nav-bubble");
	const mainContent = document.querySelector("main");
	const navPhrase = document.getElementById("navPhrase");
	const chatReset = document.getElementById("chat-reset");
	let originalContent = navPhrase.innerHTML;

	function resetChatInterface() {
		navPhrase.innerHTML = originalContent;
		talkBubble.classList.remove("chat-active");
		mainContent.classList.remove("chat-active");
	}

	chatReset.addEventListener("click", resetChatInterface);

	function activateChatInterface() {
		navPhrase.innerHTML = `
		<form id="chat-form">
		  <input type="text" id="user-input" placeholder="Search... or say hi?">
		  <button type="submit" style="display:none;">Send</button>
		</form>
		<div id="search-results"></div>
	  `;
		document.getElementById("user-input").focus();

		const searchResults = document.getElementById("search-results");
		let pagefind;

		document
			.getElementById("user-input")
			.addEventListener("input", async function () {
				if (!pagefind) {
					pagefind = await import("/pagefind/pagefind.js");
					await pagefind.options({
						element: "#search-results",
						excerptLength: 15,
						highlightParam: "highlight",
					});
					await pagefind.init();
				}

				const query = this.value.trim();
				if (query.length > 2) {
					const search = await pagefind.search(query);
					const results = await Promise.all(
						search.results.map((r) => r.data()),
					);

					searchResults.innerHTML =
						results.length > 0
							? results
									.map(
										(result) => `
			<a href="${result.url}" class="search-result">
			  <div class="search-result-title">${result.meta.title || "Untitled"}</div>
			  <p>${result.excerpt}</p>
			</a>
		  `,
									)
									.join("")
							: "";
					talkBubble.classList.add("chat-active");
				} else {
					searchResults.innerHTML = "";
				}
			});

		document
			.getElementById("chat-form")
			.addEventListener("submit", function (e) {
				e.preventDefault();
				const userInput = document.getElementById("user-input");
				if (userInput.value.trim() !== "") {
					sendMessageToWorker(userInput.value.trim());
					userInput.value = "";
					searchResults.innerHTML = "";
				}
			});

		document
			.getElementById("user-input")
			.addEventListener("keydown", function (e) {
				if (e.key === "Escape") resetChatInterface();
			});
	}

	function handleChatTrigger() {
		talkBubble.classList.toggle("chat-active");
		mainContent.classList.toggle("chat-active");
		talkBubble.classList.contains("chat-active")
			? activateChatInterface()
			: (navPhrase.innerHTML = originalContent);
	}

	chatTrigger.addEventListener("click", handleChatTrigger);

	navPhrase.addEventListener("click", function (event) {
		if (event.target.tagName.toLowerCase() === "a") return;
		if (
			window.innerWidth < 840 &&
			!talkBubble.classList.contains("chat-active")
		) {
			handleChatTrigger();
		} else if (navPhrase.classList.contains("clickable")) {
			activateChatInterface();
			navPhrase.classList.remove("clickable");
		}
	});
});


		
			
			/**
 * A lightweight youtube embed. Still should feel the same to the user, just MUCH faster to initialize and paint.
 *
 * Thx to these as the inspiration
 *   https://storage.googleapis.com/amp-vs-non-amp/youtube-lazy.html
 *   https://autoplay-youtube-player.glitch.me/
 *
 * Once built it, I also found these:
 *   https://github.com/ampproject/amphtml/blob/master/extensions/amp-youtube (👍👍)
 *   https://github.com/Daugilas/lazyYT
 *   https://github.com/vb/lazyframe
 */
class LiteYTEmbed extends HTMLElement {
    connectedCallback() {
        this.videoId = this.getAttribute('videoid');

        let playBtnEl = this.querySelector('.lty-playbtn');
        // A label for the button takes priority over a [playlabel] attribute on the custom-element
        this.playLabel = (playBtnEl && playBtnEl.textContent.trim()) || this.getAttribute('playlabel') || 'Play';

        this.dataset.title = this.getAttribute('title') || "";

        /**
         * Lo, the youtube poster image!  (aka the thumbnail, image placeholder, etc)
         *
         * See https://github.com/paulirish/lite-youtube-embed/blob/master/youtube-thumbnail-urls.md
         */
        if (!this.style.backgroundImage) {
          this.style.backgroundImage = `url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`;
          this.upgradePosterImage();
        }

        // Set up play button, and its visually hidden label
        if (!playBtnEl) {
            playBtnEl = document.createElement('button');
            playBtnEl.type = 'button';
            playBtnEl.classList.add('lty-playbtn');
            this.append(playBtnEl);
        }
        if (!playBtnEl.textContent) {
            const playBtnLabelEl = document.createElement('span');
            playBtnLabelEl.className = 'lyt-visually-hidden';
            playBtnLabelEl.textContent = this.playLabel;
            playBtnEl.append(playBtnLabelEl);
        }

        this.addNoscriptIframe();

        // for the PE pattern, change anchor's semantics to button
        if(playBtnEl.nodeName === 'A'){
            playBtnEl.removeAttribute('href');
            playBtnEl.setAttribute('tabindex', '0');
            playBtnEl.setAttribute('role', 'button');
            // fake button needs keyboard help
            playBtnEl.addEventListener('keydown', e => {
                if( e.key === 'Enter' || e.key === ' ' ){
                    e.preventDefault();
                    this.activate();
                }
            });
        }

        // On hover (or tap), warm up the TCP connections we're (likely) about to use.
        this.addEventListener('pointerover', LiteYTEmbed.warmConnections, {once: true});
        this.addEventListener('focusin', LiteYTEmbed.warmConnections, {once: true});

        // Once the user clicks, add the real iframe and drop our play button
        // TODO: In the future we could be like amp-youtube and silently swap in the iframe during idle time
        //   We'd want to only do this for in-viewport or near-viewport ones: https://github.com/ampproject/amphtml/pull/5003
        this.addEventListener('click', this.activate);

        // Chrome & Edge desktop have no problem with the basic YouTube Embed with ?autoplay=1
        // However Safari desktop and most/all mobile browsers do not successfully track the user gesture of clicking through the creation/loading of the iframe,
        // so they don't autoplay automatically. Instead we must load an additional 2 sequential JS files (1KB + 165KB) (un-br) for the YT Player API
        // TODO: Try loading the the YT API in parallel with our iframe and then attaching/playing it. #82
        this.needsYTApi = this.hasAttribute("js-api") || navigator.vendor.includes('Apple') || navigator.userAgent.includes('Mobi');
    }

    /**
     * Add a <link rel={preload | preconnect} ...> to the head
     */
    static addPrefetch(kind, url, as) {
        const linkEl = document.createElement('link');
        linkEl.rel = kind;
        linkEl.href = url;
        if (as) {
            linkEl.as = as;
        }
        document.head.append(linkEl);
    }

    /**
     * Begin pre-connecting to warm up the iframe load
     * Since the embed's network requests load within its iframe,
     *   preload/prefetch'ing them outside the iframe will only cause double-downloads.
     * So, the best we can do is warm up a few connections to origins that are in the critical path.
     *
     * Maybe `<link rel=preload as=document>` would work, but it's unsupported: http://crbug.com/593267
     * But TBH, I don't think it'll happen soon with Site Isolation and split caches adding serious complexity.
     */
    static warmConnections() {
        if (LiteYTEmbed.preconnected) return;

        // The iframe document and most of its subresources come right off youtube.com
        LiteYTEmbed.addPrefetch('preconnect', 'https://www.youtube-nocookie.com');
        // The botguard script is fetched off from google.com
        LiteYTEmbed.addPrefetch('preconnect', 'https://www.google.com');

        // Not certain if these ad related domains are in the critical path. Could verify with domain-specific throttling.
        LiteYTEmbed.addPrefetch('preconnect', 'https://googleads.g.doubleclick.net');
        LiteYTEmbed.addPrefetch('preconnect', 'https://static.doubleclick.net');

        LiteYTEmbed.preconnected = true;
    }

    fetchYTPlayerApi() {
        if (window.YT || (window.YT && window.YT.Player)) return;

        this.ytApiPromise = new Promise((res, rej) => {
            var el = document.createElement('script');
            el.src = 'https://www.youtube.com/iframe_api';
            el.async = true;
            el.onload = _ => {
                YT.ready(res);
            };
            el.onerror = rej;
            this.append(el);
        });
    }

    /** Return the YT Player API instance. (Public L-YT-E API) */
    async getYTPlayer() {
        if(!this.playerPromise) {
            await this.activate();
        }

        return this.playerPromise;
    }

    async addYTPlayerIframe() {
        this.fetchYTPlayerApi();
        await this.ytApiPromise;

        const videoPlaceholderEl = document.createElement('div')
        this.append(videoPlaceholderEl);

        const paramsObj = Object.fromEntries(this.getParams().entries());

        this.playerPromise = new Promise(resolve => {
            let player = new YT.Player(videoPlaceholderEl, {
                width: '100%',
                videoId: this.videoId,
                playerVars: paramsObj,
                events: {
                    'onReady': event => {
                        event.target.playVideo();
                        resolve(player);
                    }
                }
            });
        });
    }

    // Add the iframe within <noscript> for indexability discoverability. See https://github.com/paulirish/lite-youtube-embed/issues/105
    addNoscriptIframe() {
        const iframeEl = this.createBasicIframe();
        const noscriptEl = document.createElement('noscript');
        // Appending into noscript isn't equivalant for mysterious reasons: https://html.spec.whatwg.org/multipage/scripting.html#the-noscript-element
        noscriptEl.innerHTML = iframeEl.outerHTML;
        this.append(noscriptEl);
    }

    getParams() {
        const params = new URLSearchParams(this.getAttribute('params') || []);
        params.append('autoplay', '1');
        params.append('playsinline', '1');
        return params;
    }

    async activate(){
        if (this.classList.contains('lyt-activated')) return;
        this.classList.add('lyt-activated');

        if (this.needsYTApi) {
            return this.addYTPlayerIframe(this.getParams());
        }

        const iframeEl = this.createBasicIframe();
        this.append(iframeEl);

        // Set focus for a11y
        iframeEl.focus();
    }

    createBasicIframe(){
        const iframeEl = document.createElement('iframe');
        iframeEl.width = 560;
        iframeEl.height = 315;
        // No encoding necessary as [title] is safe. https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html#:~:text=Safe%20HTML%20Attributes%20include
        iframeEl.title = this.playLabel;
        iframeEl.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';
        iframeEl.allowFullscreen = true;
        // AFAIK, the encoding here isn't necessary for XSS, but we'll do it only because this is a URL
        // https://stackoverflow.com/q/64959723/89484
        iframeEl.src = `https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}`;
        return iframeEl;
    }

    /**
     * In the spirit of the `lowsrc` attribute and progressive JPEGs, we'll upgrade the reliable
     * poster image to a higher resolution one, if it's available.
     * Interestingly this sddefault webp is often smaller in filesize, but we will still attempt it second
     * because getting _an_ image in front of the user if our first priority.
     *
     * See https://github.com/paulirish/lite-youtube-embed/blob/master/youtube-thumbnail-urls.md for more details
     */
    upgradePosterImage() {
         // Defer to reduce network contention.
        setTimeout(() => {
            const webpUrl = `https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`;
            const img = new Image();
            img.fetchPriority = 'low'; // low priority to reduce network contention
            img.referrerpolicy = 'origin'; // Not 100% sure it's needed, but https://github.com/ampproject/amphtml/pull/3940
            img.src = webpUrl;
            img.onload = e => {
                // A pretty ugly hack since onerror won't fire on YouTube image 404. This is (probably) due to
                // Youtube's style of returning data even with a 404 status. That data is a 120x90 placeholder image.
                // … per "annoying yt 404 behavior" in the .md
                const noAvailablePoster = e.target.naturalHeight == 90 && e.target.naturalWidth == 120;
                if (noAvailablePoster) return;

                this.style.backgroundImage = `url("${webpUrl}")`;
            }
        }, 100);
    }
}
// Register custom element
customElements.define('lite-youtube', LiteYTEmbed);

			const style = document.head.appendChild(document.createElement('style'));
style.textContent = /*css*/`

  lite-vimeo {
    aspect-ratio: 16 / 9;
    background-color: #000;
    position: relative;
    display: block;
    contain: content;
    background-position: center center;
    background-size: cover;
    cursor: pointer;
  }

  lite-vimeo > iframe {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    border: 0;
  }

  lite-vimeo > .ltv-playbtn {
    font-size: 10px;
    padding: 0;
    width: 6.5em;
    height: 4em;
    background: rgba(23, 35, 34, .75);
    z-index: 1;
    opacity: .8;
    border-radius: .5em;
    transition: opacity .2s ease-out, background .2s ease-out;
    outline: 0;
    border: 0;
    cursor: pointer;
  }

  lite-vimeo:hover > .ltv-playbtn {
    background-color: rgb(0, 173, 239);
    opacity: 1;
  }

  /* play button triangle */
  lite-vimeo > .ltv-playbtn::before {
    content: '';
    border-style: solid;
    border-width: 10px 0 10px 20px;
    border-color: transparent transparent transparent #fff;
  }

  lite-vimeo > .ltv-playbtn,
  lite-vimeo > .ltv-playbtn::before {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate3d(-50%, -50%, 0);
  }

  /* Post-click styles */
  lite-vimeo.ltv-activated {
    cursor: unset;
  }

  lite-vimeo.ltv-activated::before,
  lite-vimeo.ltv-activated > .ltv-playbtn {
    opacity: 0;
    pointer-events: none;
  }
`;

/**
 * Ported from https://github.com/paulirish/lite-youtube-embed
 *
 * A lightweight vimeo embed. Still should feel the same to the user, just MUCH faster to initialize and paint.
 *
 * Thx to these as the inspiration
 *   https://storage.googleapis.com/amp-vs-non-amp/youtube-lazy.html
 *   https://autoplay-youtube-player.glitch.me/
 *
 * Once built it, I also found these:
 *   https://github.com/ampproject/amphtml/blob/master/extensions/amp-youtube (👍👍)
 *   https://github.com/Daugilas/lazyYT
 *   https://github.com/vb/lazyframe
 */
class LiteVimeo extends (globalThis.HTMLElement ?? class {}) {
  /**
   * Begin pre-connecting to warm up the iframe load
   * Since the embed's network requests load within its iframe,
   *   preload/prefetch'ing them outside the iframe will only cause double-downloads.
   * So, the best we can do is warm up a few connections to origins that are in the critical path.
   *
   * Maybe `<link rel=preload as=document>` would work, but it's unsupported: http://crbug.com/593267
   * But TBH, I don't think it'll happen soon with Site Isolation and split caches adding serious complexity.
   */
  static _warmConnections() {
    if (LiteVimeo.preconnected) return;
    LiteVimeo.preconnected = true;

    // The iframe document and most of its subresources come right off player.vimeo.com
    addPrefetch('preconnect', 'https://player.vimeo.com');
    // Images
    addPrefetch('preconnect', 'https://i.vimeocdn.com');
    // Files .js, .css
    addPrefetch('preconnect', 'https://f.vimeocdn.com');
    // Metrics
    addPrefetch('preconnect', 'https://fresnel.vimeocdn.com');
  }

  connectedCallback() {
    this.videoId = this.getAttribute('videoid');

    /**
     * Lo, the vimeo placeholder image!  (aka the thumbnail, poster image, etc)
     * We have to use the Vimeo API.
     */
    let { width, height } = getThumbnailDimensions(this.getBoundingClientRect());
    let devicePixelRatio = window.devicePixelRatio || 1;
    if (devicePixelRatio >= 2) devicePixelRatio *= .75;
    width = Math.round(width * devicePixelRatio);
    height = Math.round(height * devicePixelRatio);

    fetch(`https://vimeo.com/api/v2/video/${this.videoId}.json`)
      .then(response => response.json())
      .then(data => {
        let thumbnailUrl = data[0].thumbnail_large;
        thumbnailUrl = thumbnailUrl.replace(/-d_[\dx]+$/i, `-d_${width}x${height}`);
        this.style.backgroundImage = `url("${thumbnailUrl}")`;
      });

    let playBtnEl = this.querySelector('.ltv-playbtn');
    // A label for the button takes priority over a [playlabel] attribute on the custom-element
    this.playLabel = (playBtnEl && playBtnEl.textContent.trim()) || this.getAttribute('playlabel') || 'Play video';

    if (!playBtnEl) {
      playBtnEl = document.createElement('button');
      playBtnEl.type = 'button';
      playBtnEl.setAttribute('aria-label', this.playLabel);
      playBtnEl.classList.add('ltv-playbtn');
      this.append(playBtnEl);
    }
    playBtnEl.removeAttribute('href');

    // On hover (or tap), warm up the TCP connections we're (likely) about to use.
    this.addEventListener('pointerover', LiteVimeo._warmConnections, {
      once: true
    });

    // Once the user clicks, add the real iframe and drop our play button
    // TODO: In the future we could be like amp-youtube and silently swap in the iframe during idle time
    //   We'd want to only do this for in-viewport or near-viewport ones: https://github.com/ampproject/amphtml/pull/5003
    this.addEventListener('click', this.addIframe);
  }

  addIframe() {
    if (this.classList.contains('ltv-activated')) return;
    this.classList.add('ltv-activated');

    const iframeEl = document.createElement('iframe');
    iframeEl.width = 640;
    iframeEl.height = 360;
    // No encoding necessary as [title] is safe. https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html#:~:text=Safe%20HTML%20Attributes%20include
    iframeEl.title = this.playLabel;
    iframeEl.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';
    // AFAIK, the encoding here isn't necessary for XSS, but we'll do it only because this is a URL
    // https://stackoverflow.com/q/64959723/89484
    iframeEl.src = `https://player.vimeo.com/video/${encodeURIComponent(this.videoId)}?autoplay=1`;
    this.append(iframeEl);

    // Set focus for a11y
    iframeEl.addEventListener('load', iframeEl.focus, { once: true });
  }
}

if (globalThis.customElements && !globalThis.customElements.get('lite-vimeo')) {
  globalThis.customElements.define('lite-vimeo', LiteVimeo);
}

/**
 * Add a <link rel={preload | preconnect} ...> to the head
 */
function addPrefetch(kind, url, as) {
  const linkElem = document.createElement('link');
  linkElem.rel = kind;
  linkElem.href = url;
  if (as) {
    linkElem.as = as;
  }
  linkElem.crossorigin = true;
  document.head.append(linkElem);
}

/**
 * Get the thumbnail dimensions to use for a given player size.
 *
 * @param {Object} options
 * @param {number} options.width The width of the player
 * @param {number} options.height The height of the player
 * @return {Object} The width and height
 */
function getThumbnailDimensions({ width, height }) {
  let roundedWidth = width;
  let roundedHeight = height;

  // If the original width is a multiple of 320 then we should
  // not round up. This is to keep the native image dimensions
  // so that they match up with the actual frames from the video.
  //
  // For example 640x360, 960x540, 1280x720, 1920x1080
  //
  // Round up to nearest 100 px to improve cacheability at the
  // CDN. For example, any width between 601 pixels and 699
  // pixels will render the thumbnail at 700 pixels width.
  if (roundedWidth % 320 !== 0) {
    roundedWidth = Math.ceil(width / 100) * 100;
    roundedHeight = Math.round((roundedWidth / width) * height);
  }

  return {
    width: roundedWidth,
    height: roundedHeight
  };
}
</script>